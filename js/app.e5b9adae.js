(function(t){function e(e){for(var i,s,c=e[0],r=e[1],u=e[2],d=0,h=[];d<c.length;d++)s=c[d],a[s]&&h.push(a[s][0]),a[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,c=1;c<n.length;c++){var r=n[c];0!==a[r]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2583:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d"),n("2583"),n("f751"),n("456d"),n("7f7f");var i=n("d0af"),a=(n("ac6a"),n("ffc1"),n("276c")),o=n("fc11"),s=n("7ad9"),c=n("d0ff"),r=function t(e){var n=this;Object(a["a"])(this,t),Object(o["a"])(this,"subscribe",function(t,e){if(n.subscribers[t]){var i=n.subscribers[t];n.subscribers[t]=i?Object(c["a"])(i).concat([e]):[e]}else n.subscribers[t]=[e];n.broadcast(t)}),Object(o["a"])(this,"broadcast",function(t){n.subscribers[t]&&n.subscribers[t].map(function(t){return t()})}),Object(o["a"])(this,"changeParam",function(t,e){n.settings[t]=e,n.broadcast(t)}),this.settings=e,this.subscribers={}},u=n("1157"),l=n.n(u),d=(n("bda4"),{primary:"#768b8E",accent:"#A0ffff",contrast:"#FF6E19"}),h=function t(e,n){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){var t=document.getElementById(i.id);if(!t){var e=document.createElement("input");e.id=i.id,e.value=1,document.body.appendChild(e)}var n="#"+i.id;l()(n).knob(i.options),l()(n).val(i.defaultValue).trigger("change")}),Object(o["a"])(this,"handleChange",function(t){i.callback(i.id,t)}),this.id=e||"new-knob-".concat(~~(100*Math.random())),this.defaultOptions={min:1,max:100,step:1,width:"50%",bgColor:d.primary,fgColor:d.accent,thickness:.2,angleOffset:-125,angleArc:250,displayInput:!1,font:"Orbitron",fontSize:10,cursor:20,change:function(t){return i.handleChange(t)}},this.options=Object.assign({},this.defaultOptions,n),this.callback=c,this.defaultValue=s,this.init()},f=function t(e){var n=this;Object(a["a"])(this,t),Object(o["a"])(this,"setFrequency",function(t){isFinite(t)&&n.osc.frequency.setValueAtTime(t,n.context.currentTime)}),Object(o["a"])(this,"setGain",function(t){return n.volume.gain.value=t}),Object(o["a"])(this,"setWavetype",function(t){return n.osc.type=t}),Object(o["a"])(this,"setDetune",function(t){n.detune=t,n.osc.detune.setValueAtTime(n.offset+n.detune,n.context.currentTime)}),Object(o["a"])(this,"setOffset",function(t){n.offset=100*t,n.osc.detune.setValueAtTime(n.offset+n.detune,n.context.currentTime)}),Object(o["a"])(this,"setEnvelope",function(t,e){return n.envelope[t]=e}),Object(o["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),Object(o["a"])(this,"disconnect",function(){return n.output.disconnect()}),Object(o["a"])(this,"play",function(){var t=n.context.currentTime;n.gate.gain.cancelScheduledValues(t),n.gate.gain.setValueAtTime(0,t+n.easing),n.gate.gain.linearRampToValueAtTime(1,t+n.envelope.attack+n.easing),n.gate.gain.linearRampToValueAtTime(n.envelope.sustain,t+n.envelope.attack+n.envelope.decay+n.easing)}),Object(o["a"])(this,"stop",function(){var t=n.context.currentTime;n.gate.gain.cancelScheduledValues(t),n.gate.gain.linearRampToValueAtTime(0,t+n.envelope.release+n.easing)}),this.context=e,this.osc=this.context.createOscillator(),this.osc.start(),this.modulated=this.context.createGain(),this.modulated.gain.value=1,this.volume=this.context.createGain(),this.gate=this.context.createGain(),this.gate.gain.value=0,this.input=this.osc,this.osc.connect(this.volume),this.volume.connect(this.modulated),this.modulated.connect(this.gate),this.output=this.gate,this.detune=0,this.offset=0,this.envelope={attack:.005,decay:.1,sustain:.6,release:.1},this.easing=.006},p=function t(e,n,i){var s=this;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){s.oscillators={osc1:new f(s.context),osc2:new f(s.context),osc3:new f(s.context)},s.connect()}),Object(o["a"])(this,"connect",function(){for(var t in s.oscillators)s.oscillators[t].connect(s.velocity)}),Object(o["a"])(this,"disconnect",function(){for(var t in s.oscillators)s.oscillators[t].disconnect()}),Object(o["a"])(this,"set",function(t,e,n){switch(e){case"frequency":for(var i in s.oscillators)s.oscillators[i].setFrequency(n);break;case"gain":s.oscillators[t].setGain(n);break;case"detune":s.oscillators[t].setDetune(n);break;case"wavetype":s.oscillators[t].setWavetype(n);break;case"offset":s.oscillators[t].setOffset(n);break;case"velocity":s.velocity.gain.value=n/128;break;case"attack":case"decay":case"sustain":case"release":s.oscillators[t].setEnvelope(e,n);break}}),Object(o["a"])(this,"play",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;for(var n in s.set(null,"frequency",t),s.oscillators)s.set(null,"velocity",e),s.oscillators[n].play()}),Object(o["a"])(this,"stop",function(){for(var t in s.oscillators)s.oscillators[t].stop()}),this.context=e,this.noteBind=n,this.outputNode=i,this.oscillators={},this.velocity=this.context.createGain(),this.velocity.connect(this.outputNode.input),this.init()},m=function t(e){var n=this;Object(a["a"])(this,t),Object(o["a"])(this,"set",function(t,e){switch(t){case"freq":n.filter.frequency.value=e;break;case"qual":n.filter.Q.value=e;break}}),Object(o["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),this.context=e,this.filter=this.context.createBiquadFilter(),this.filter.type="lowpass",this.input=this.filter,this.output=this.filter,this.modulated=this.context.createGain(),this.modulated.gain.value=6e3,this.modulated.connect(this.filter.detune)},y=(n("f559"),function t(e,n){var i=this;Object(a["a"])(this,t),Object(o["a"])(this,"set",function(t,e){switch(t){case"amount":i.amount.gain.value=e;break;case"freq":i.osc.frequency.setValueAtTime(e,i.context.currentTime);break;case"wavetype":i.osc.type=e;break;case"modulation":i.modulate(e);break}}),Object(o["a"])(this,"modulate",function(t){var e=[];Object.keys(t).map(function(n){if(n.startsWith("lfo")){var a=t[n];switch(a){case"osc1":case"osc2":case"osc3":var o=i.modulatedItems["VCOs"];Object.keys(o).map(function(t){var n=o[t].oscillators[a].modulated.gain;e.push(n)});break;case"filter":var s=i.modulatedItems["VCF"],c=s.modulated;e.push(c);break}}}),i.modulatedPorts.map(function(t){return i.output.disconnect(t)}),e.map(function(t){return i.output.connect(t)}),i.modulatedPorts=e}),Object(o["a"])(this,"connect",function(t){t.hasOwnProperty("input")?i.output.connect(t.input):i.output.connect(t)}),Object(o["a"])(this,"disconnect",function(t){t.hasOwnProperty("input")?i.output.disconnect(t.input):i.output.disconnect(t)}),this.context=e,this.modulatedItems=n,this.modulatedPorts=[],this.osc=this.context.createOscillator(),this.osc.start(),this.amount=this.context.createGain(),this.osc.connect(this.amount),this.output=this.osc.connect(this.amount)}),b=function t(e,n){var i=this;Object(a["a"])(this,t),Object(o["a"])(this,"set",function(t,e){"modulation"!==t?(i.envelope[t]=e,i.updateValues()):i.reconnect(e)}),Object(o["a"])(this,"updateValues",function(){return i.modulatedPorts.map(function(t){return t.envelope=i.envelope})}),Object(o["a"])(this,"reconnect",function(t){var e=[];Object.keys(t).map(function(n){if(n.startsWith("vca")){var a=t[n];switch(a){case"osc1":case"osc2":case"osc3":var o=i.modulatedItems["VCOs"];Object.keys(o).map(function(t){var n=o[t].oscillators[a];e.push(n)});break;case"filter":delete t[n];break}var s={attack:0,decay:0,sustain:1,release:0};i.modulatedPorts.map(function(t){return t.envelope=s}),i.modulatedPorts=e,i.updateValues()}})}),this.context=e,this.modulatedItems=n,this.modulatedPorts=[],this.envelope={attack:.005,decay:.1,sustain:.6,release:.1}},v=function t(e){var n=this;Object(a["a"])(this,t),Object(o["a"])(this,"set",function(t,e){switch(t){case"gain":n.volume.gain.value=e;break;case"time":n.delay.delayTime.value=e;break;case"feedback":n.feedback.gain.value=e;break;case"cutoff":n.filter.frequency.value=e;break}}),Object(o["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),this.context=e,this.delay=this.context.createDelay(15),this.feedback=this.context.createGain(),this.filter=this.context.createBiquadFilter(),this.filter.type="lowpass",this.filter.Q.value=5,this.volume=this.context.createGain(),this.input=this.delay,this.delay.connect(this.feedback),this.feedback.connect(this.filter),this.filter.connect(this.delay),this.delay.connect(this.volume),this.output=this.volume},g=n("4f64"),O=n.n(g),k=function t(e,n,i){var s=this;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){s.keyboard=new O.a(s.options),s.keyboard.keyDown=function(t,e){return s.handleKeyDown(t,e)},s.keyboard.keyUp=function(t,e){return s.handleKeyUp(t,e)}}),Object(o["a"])(this,"handleKeyDown",function(t,e){s.keyDownCallback(t,e)}),Object(o["a"])(this,"handleKeyUp",function(t,e){s.keyUpCallback(t,e)}),Object(o["a"])(this,"set",function(t,e){if(e)return s.keyboard.keyDown=function(t,e){return s.handleKeyDown(t,e)},s.keyboard.keyUp=function(t,e){return s.handleKeyUp(t,e)},void(document.getElementById("keyboard").dataset["enabled"]=!0);s.keyboard.keyDown=function(t,e){},s.keyboard.keyUp=function(t,e){},document.getElementById("keyboard").dataset["enabled"]=!1}),this.defaultOptions={id:"keyboard",width:664,height:72,startNote:"C3",octaves:2,whiteKeyColour:"rgba(38, 39, 47, 0.85)",blackKeyColour:"#A0FFFF",borderColour:"#A0FFFF",activeColour:"#FF6E19"},this.options=Object.assign({},this.defaultOptions,e),this.keyDownCallback=n,this.keyUpCallback=i,this.init()},w=(n("6b54"),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(e-t)+t}),_=function(t){return{toDec:function(){return t.startsWith("#")&&(t=t.slice(1)),[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4),16)]},toHex:function(){return"#"+t[0].toString(16)+t[1].toString(16)+t[2].toString(16)}}},x="unknown";(function(){var t=window.navigator.userAgent.toLowerCase(),e=t.indexOf("msie"),n=t.indexOf("trident"),i=t.indexOf("edge"),a=t.indexOf("firefox"),o=t.indexOf("chrome"),s=t.indexOf("safari"),c=document.getElementsByTagName("html")[0];"undefined"!==typeof window.orientation&&c.classList.add("mobile-device"),e>0||n>0||i>0?(x="any-ie",c.classList.add(x)):a>0?(x="any-firefox",c.classList.add(x)):o>0?(x="any-chrome",c.classList.add(x)):s>0&&(x="any-safari",c.classList.add(x))})();for(var j={osc1__gain:0,osc1__detune:0,osc1__wavetype:"sine",osc1__offset:0,osc2__gain:.95,osc2__detune:0,osc2__wavetype:"sawtooth",osc2__offset:0,osc3__gain:0,osc3__detune:0,osc3__wavetype:"square",osc3__offset:0,filter__freq:3500,filter__qual:4,lfo__amount:.15,lfo__freq:2,lfo__wavetype:"sine",attack:.05,decay:.1,sustain:.6,release:.1,delay__gain:.2,delay__time:.3,delay__feedback:.1,delay__cutoff:1e3,modulation:{"lfo__out-1":"osc2","lfo__out-3":"filter","vca__out-2":"osc1"},options:{midi:!!navigator.requestMIDIAccess,keyboard:!0,visualization:"any-chrome"===x}},q=function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sine",s=arguments.length>2?arguments[2]:void 0;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){n.items=Object(c["a"])(document.querySelectorAll("#".concat(n.id," li"))),n.updateDOM(n.defaultValue),n.items.map(function(t){t.addEventListener("click",function(){var e=t.dataset.wavetype;n.callback(n.id,e),n.updateDOM(e)})})}),Object(o["a"])(this,"updateDOM",function(t){n.items.map(function(e){e.dataset.wavetype===t?e.classList.add("selected"):e.classList.remove("selected")})}),this.id=e,this.defaultValue=i,this.callback=s,this.items=[],this.init()},D=function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){n.buttonInc=document.querySelector("#".concat(n.id," .step-up")),n.buttonDec=document.querySelector("#".concat(n.id," .step-down")),n.buttonInc.addEventListener("click",function(){n.value<n.max&&(++n.value,n.updateDOM())}),n.buttonDec.addEventListener("click",function(){n.value>n.min&&(--n.value,n.updateDOM())})}),Object(o["a"])(this,"updateDOM",function(t){n.callback(n.id,n.value),n.inputDOM.value=n.value}),this.id=e,this.value=i,this.callback=s,this.inputDOM=document.querySelector("#".concat(this.id," input")),this.min=this.inputDOM.getAttribute("min")||-12,this.max=this.inputDOM.getAttribute("max")||12,this.init()},C=function t(e,n,i){var s=this;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){s.container=document.getElementById(s.id),s.toggleButton=s.container.getElementsByClassName("toggle-options")[0],s.toggleButton.addEventListener("click",function(){s.container.classList.toggle("visible")}),s.optionsDOM=s.container.getElementsByTagName("li"),Object(c["a"])(s.optionsDOM).map(function(t){t.dataset.status=s.params[t.dataset.option]?"on":"off",t.addEventListener("click",function(){s.params[t.dataset.option]=!s.params[t.dataset.option],s.callback(s.id,s.params),s.updateDOM()})})}),Object(o["a"])(this,"updateDOM",function(){console.log(s.params),Object(c["a"])(s.optionsDOM).map(function(t){t.dataset.status=s.params[t.dataset.option]?"on":"off"})}),this.id=e,this.params=n,this.callback=i,this.optionsDOM=[],this.init()},I=function t(e,n){var i=this;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){var t=i.controlsDescription;switch(t.type){case"knob":i.controlsItems.push(new h(t.id,t.options,j[t.id],i.changeStoreParam));break;case"list":i.controlsItems.push(new q(t.id,j[t.id],i.changeStoreParam));break;case"input":i.controlsItems.push(new D(t.id,j[t.id],i.changeStoreParam));break;case"options":i.controlsItems.push(new C(t.id,j[t.id],i.changeStoreParam))}}),this.controlsDescription=e,this.changeStoreParam=n,this.controlsItems=[],this.init()},A=(n("7514"),{small:40,medium:60,big:90,huge:110}),S=[{type:"knob",id:"osc1__gain",options:{min:0,max:1,step:.01,width:A.medium,height:A.medium}},{type:"knob",id:"osc1__detune",options:{width:A.small,height:A.small,min:-100,max:100,step:1,thickness:.3}},{type:"list",id:"osc1__wavetype"},{type:"input",id:"osc1__offset"},{type:"knob",id:"osc2__gain",options:{min:0,max:1,step:.01,width:A.medium,height:A.medium}},{type:"knob",id:"osc2__detune",options:{width:A.small,height:A.small,min:-100,max:100,step:1,thickness:.3}},{type:"list",id:"osc2__wavetype"},{type:"input",id:"osc2__offset"},{type:"knob",id:"osc3__gain",options:{min:0,max:1,step:.01,width:A.medium,height:A.medium}},{type:"knob",id:"osc3__detune",options:{width:A.small,height:A.small,min:-100,max:100,step:1,thickness:.3}},{type:"list",id:"osc3__wavetype"},{type:"input",id:"osc3__offset"},{type:"knob",id:"filter__freq",options:{min:32,max:7902,width:A.big,height:A.big,displayInput:!0}},{type:"knob",id:"filter__qual",options:{min:0,max:10,step:.1,width:A.small,height:A.small,thickness:.3}},{type:"knob",id:"lfo__amount",options:{min:0,max:1,step:.01,width:A.medium,height:A.medium}},{type:"knob",id:"lfo__freq",options:{min:0,max:20,step:.05,width:A.big,height:A.big,displayInput:!0}},{type:"list",id:"lfo__wavetype"},{type:"knob",id:"attack",options:{min:0,max:4,step:.01,width:A.medium,height:A.medium,displayInput:!0}},{type:"knob",id:"decay",options:{min:0,max:4,step:.01,width:A.medium,height:A.medium,displayInput:!0}},{type:"knob",id:"sustain",options:{min:0,max:1,step:.01,width:A.medium,height:A.medium,displayInput:!0}},{type:"knob",id:"release",options:{min:0,max:8,step:.01,width:A.medium,height:A.medium,displayInput:!0}},{type:"knob",id:"delay__gain",options:{min:0,max:1,step:.01,width:A.medium,height:A.medium}},{type:"knob",id:"delay__time",options:{min:0,max:5,step:.01,width:A.big,height:A.big}},{type:"knob",id:"delay__feedback",options:{min:0,max:.9,step:.01,thickness:.3,width:A.small,height:A.small}},{type:"knob",id:"delay__cutoff",options:{min:30,max:6e3,step:1,width:A.medium,height:A.medium,displayInput:!0}},{type:"options",id:"options"}],V=[{name:"osc1",type:"in",pos:{x:30,y:330}},{name:"osc2",type:"in",pos:{x:70,y:330}},{name:"osc3",type:"in",pos:{x:110,y:330}},{name:"filter",type:"in",pos:{x:305,y:150}},{name:"lfo__out-1",type:"out",pos:{x:345,y:330}},{name:"lfo__out-2",type:"out",pos:{x:375,y:330}},{name:"lfo__out-3",type:"out",pos:{x:405,y:330}},{name:"lfo__out-4",type:"out",pos:{x:435,y:330}},{name:"lfo__out-5",type:"out",pos:{x:465,y:330}},{name:"vca__out-1",type:"out",pos:{x:510,y:330}},{name:"vca__out-2",type:"out",pos:{x:540,y:330}},{name:"vca__out-3",type:"out",pos:{x:570,y:330}},{name:"vca__out-4",type:"out",pos:{x:600,y:330}},{name:"vca__out-5",type:"out",pos:{x:630,y:330}}],P=function t(e,n){var i=this;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){i.wires=[],i.canvas=document.getElementById("wires"),i.canvas.drawCircle=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=i.canvas.getContext("2d");o.beginPath(),o.arc(t,e,n,0,2*Math.PI),o.lineWidth=6,o.strokeStyle="#111111",o.globalAlpha=a,o.stroke(),o.lineWidth=5,o.strokeStyle=d.accent,o.stroke()},i.canvas.drawCurve=function(t,e){var n=i.canvas.getContext("2d");n.beginPath(),n.moveTo(t.x,t.y);var a={x:(t.x+e.x)/2,y:t.y+e.y};n.quadraticCurveTo(a.x,a.y,e.x,e.y),n.lineWidth=6,n.lineCap="round",n.strokeStyle="#111111",n.globalAlpha=1,n.stroke(),n.lineWidth=4,n.strokeStyle=d.accent,n.stroke()};var t,e=document.querySelector("body"),n={},a={},s={},c={},r=function(t){V.map(function(e){var n;n=t.type?t.type!==e.type||t.name===e.name?1:.5:1,i.canvas.drawCircle(e.pos.x,e.pos.y,4,n)})},u=function(){Object.keys(i.modulationSettings).map(function(t){i.canvas.drawCurve(V.find(function(e){return e.name===t}).pos,V.find(function(e){return e.name===i.modulationSettings[t]}).pos)})},l=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return V.map(function(i){n.x>=i.pos.x-e&&n.x<=i.pos.x+e&&n.y>=i.pos.y-e&&n.y<=i.pos.y+e&&(t=i)}),t},h=function(t){var e=Object.keys(i.modulationSettings);switch(t.type){case"out":for(var n=0;n<e.length;n++)if(e[n]===t.name)return Object(o["a"])({},e[n],i.modulationSettings[e[n]]);break;case"in":for(var a=0;a<e.length;a++)if(i.modulationSettings[e[a]]===t.name)return Object(o["a"])({},e[a],i.modulationSettings[e[a]]);break}};i.canvas.addEventListener("mousemove",function(t){n.x=t.offsetX,n.y=t.offsetY}),i.canvas.addEventListener("mousedown",function(t){if(a=l(),a){p(!0),e.classList.add("on-wires-drawing"),s={},c={};var n=h(a);if(n){var o=Object.keys(n)[0];switch(a.type){case"in":s=V.find(function(t){return t.name===o});break;case"out":s=V.find(function(t){return t.name===n[o]})}delete i.modulationSettings[o],i.changeStoreParam("modulation",i.modulationSettings)}else s=V.find(function(t){return t.name===a.name})}}),i.canvas.addEventListener("mouseup",function(t){if(a=l(),a){if(h(a))return void f();if(c=V.find(function(t){return t.name===a.name}),s.pos&&c.pos&&s.type!==c.type){switch(s.type){case"out":i.modulationSettings[s.name]=c.name;break;case"in":i.modulationSettings[c.name]=s.name;break}i.changeStoreParam("modulation",i.modulationSettings)}}f()});var f=function(){!1,e.classList.remove("on-wires-drawing"),a={},s={},c={},window.cancelAnimationFrame(t),p(!1)},p=function e(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=i.canvas.getContext("2d");o.clearRect(0,0,i.canvas.width,i.canvas.height),r(s),u(),a&&(i.canvas.drawCurve(s.pos?s.pos:n,c.pos?c.pos:n),t=window.requestAnimationFrame(e))};p()}),this.modulationSettings=e,this.changeStoreParam=n,this.init()},F=(n("34ef"),function t(e){var n=this;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){n.canvas=document.getElementById("visual");var t,e,i,a,o,s=n.canvas.getContext("2d"),c={},r=function(){t=window.innerWidth,e=window.innerHeight,c={x:t/2,y:e/2},n.canvas.width=t,n.canvas.height=e,i=Math.round(t/n.bufferLength),a=Math.round(e/8),o=c.y-a/2};r(),n.colors={accent:_(d.accent).toDec(),contrast:_(d.contrast).toDec()},window.addEventListener("resize",function(){return r()});for(var u=e,l=[],h=0;h<=n.analyser.frequencyBinCount;h++){var f={startAngle:w(-2*Math.PI,2*Math.PI),endAngle:w(-2*Math.PI,2*Math.PI)};l.push(f)}var p,m,y=function(){for(var e=0;e<n.bufferLength;e++)s.beginPath(),s.arc(t,c.y,~~(u*(n.frequencyData[e]/255)),l[e].startAngle,l[e].endAngle),s.lineWidth=1,s.strokeStyle="rgba(".concat(n.colors.contrast,", \n\t\t\t\t\t\t\t\t\t\t").concat(n.frequencyData[e]/255,")"),s.stroke()},b=function(){s.beginPath(),p=0,m=0,s.lineWidth=1,s.strokeStyle="".concat(d.accent),s.moveTo(0,c.y);for(var e=0;e<n.bufferLength;e++)m=a*(n.timeDomainData[e]/255)+o,s.lineTo(p,m),p+=i;s.moveTo(t,c.y),s.stroke()},v=function(){for(var e=1,i=0;i<n.bufferLength;i++)s.beginPath(),s.moveTo(t,i*e+c.y),s.lineTo(t-n.frequencyData[i],i*e+c.y),s.strokeStyle="rgba(".concat(n.colors.accent,",\n\t\t\t\t\t\t\t\t\t\t").concat(n.frequencyData[i]/255,")"),s.stroke(),e*=-1};n.render=function(){s.clearRect(0,0,t,e),n.analyser.getByteFrequencyData(n.frequencyData),n.analyser.getByteTimeDomainData(n.timeDomainData),y(),b(),v(),n.requestAnimID=requestAnimationFrame(n.render)}}),Object(o["a"])(this,"set",function(t,e){if(e)return n.render(),void(document.getElementById("visual").dataset["visible"]=!0);cancelAnimationFrame(n.requestAnimID),document.getElementById("visual").dataset["visible"]=!1}),Object(o["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),this.context=e,this.analyser=this.context.createAnalyser(),this.analyser.fftSize=512,this.analyser.maxDecibels=0,this.bufferLength=this.analyser.frequencyBinCount,this.frequencyData=new Uint8Array(this.bufferLength),this.timeDomainData=new Uint8Array(this.bufferLength),this.input=this.analyser,this.output=this.analyser,this.init()}),M={21:{name:"A0",freq:27.5},22:{name:"A#0",freq:29.1352350949},23:{name:"B0",freq:30.8677063285},24:{name:"C1",freq:32.7031956626},25:{name:"C#1",freq:34.6478288721},26:{name:"D1",freq:36.7080959897},27:{name:"D#1",freq:38.8908729653},28:{name:"E1",freq:41.2034446141},29:{name:"F1",freq:43.6535289291},30:{name:"F#1",freq:46.249302839},31:{name:"G1",freq:48.9994294977},32:{name:"G#1",freq:51.9130871975},33:{name:"A1",freq:55},34:{name:"A#1",freq:58.2704701898},35:{name:"B1",freq:61.735412657}},L=24;L<128;L++)M[L+12]={name:M[L].name.slice(0,-1)+~~(L/12),freq:2*M[L].freq};var E=M,T=function t(){var e=this;Object(a["a"])(this,t),Object(o["a"])(this,"init",function(){e.overallGain=e.context.createGain(),e.overallGain.gain.value=.5,e.VCF.connect(e.Delay),e.VCF.connect(e.overallGain),e.Delay.connect(e.overallGain),e.overallGain.connect(e.Visual.input),e.Visual.connect(e.context.destination),document.body.classList.add("loaded")}),Object(o["a"])(this,"play",function(t,n,i){return e.VCOs[t].play(n,i)}),Object(o["a"])(this,"stop",function(t){return e.VCOs[t].stop()}),Object(o["a"])(this,"resumeAudio",function(){"suspended"===e.context.state&&e.context.resume().then(function(){console.log("Playback resumed successfully")})});try{this.context=window.webkitAudioContext?new s["a"]:new AudioContext,document.body.addEventListener("mousedown",this.resumeAudio),document.body.addEventListener("keydown",this.resumeAudio)}catch(n){return void alert("Web Audio API is not supported in this browser")}this.store=new r(j),this.controls=[],S.map(function(t){e.controls.push(new I(t,e.store.changeParam,e.store.subscribe))}),this.VCF=new m(this.context),["freq","qual"].map(function(t){e.store.subscribe("filter__".concat(t),function(){return e.VCF.set(t,e.store.settings["filter__".concat(t)])})}),this.VCOs={},Object.entries(E).map(function(t){var n=Object(i["a"])(t,2),a=(n[0],n[1]),s=new p(e.context,a.name,e.VCF);Object.keys(s.oscillators).forEach(function(t){["gain","detune","wavetype","offset"].forEach(function(n){e.store.subscribe("".concat(t,"__").concat(n),function(){return s.set(t,n,e.store.settings["".concat(t,"__").concat(n)])})})}),e.VCOs=Object.assign({},e.VCOs,Object(o["a"])({},a.name,s))}),this.keyboard=new k({id:"keyboard",startNote:"C3"},function(t,n){return e.play(t,n)},function(t,n){return e.stop(t)}),this.store.subscribe("options",function(){return e.keyboard.set("enabled",e.store.settings.options.keyboard)}),this.LFO=new y(this.context,{VCOs:this.VCOs,VCF:this.VCF}),["amount","freq","wavetype"].map(function(t){e.store.subscribe("lfo__".concat(t),function(){return e.LFO.set(t,e.store.settings["lfo__".concat(t)])})}),this.store.subscribe("modulation",function(){return e.LFO.set("modulation",e.store.settings["modulation"])}),this.VCA=new b(this.context,{VCOs:this.VCOs,VCF:this.VCF}),["attack","decay","sustain","release"].map(function(t){e.store.subscribe("".concat(t),function(){return e.VCA.set(t,e.store.settings["".concat(t)])})}),this.store.subscribe("modulation",function(){return e.VCA.set("modulation",e.store.settings["modulation"])}),this.Delay=new v(this.context),["gain","time","feedback","cutoff"].map(function(t){e.store.subscribe("delay__".concat(t),function(){return e.Delay.set(t,e.store.settings["delay__".concat(t)])})}),this.Wires=new P(this.store.settings.modulation,this.store.changeParam),this.Visual=new F(this.context),this.store.subscribe("options",function(){return e.Visual.set("visible",e.store.settings.options.visualization)}),this.init()},B=(n("ac4d"),n("8a81"),n("e954")),G=function(){function t(e){var n=this;Object(a["a"])(this,t),Object(o["a"])(this,"getMessage",function(t){var e=t.data[0],i=E[t.data[1]],a=t.data.length>2?t.data[2]:0;i&&{144:function(){a>0?n.synth.play(i.name,i.freq,a):n.synth.stop(i.name)},128:function(){return n.synth.stop(i.name)}}[e]()}),this.synth=e,this.init()}return Object(B["a"])(t,[{key:"init",value:function(){var t=this;if(navigator.requestMIDIAccess)console.log("This browser supports MIDI"),navigator.requestMIDIAccess().then(function(e){var n=!0,i=!1,a=void 0;try{for(var o,s=e.inputs.values()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;c.onmidimessage=t.getMessage}}catch(r){i=!0,a=r}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}},function(){return console.log("Could not access your MIDI devices")});else{console.log("MIDI is not supported in this browser");var e=document.querySelector('li[data-option="midi"]');e.parentNode.removeChild(e)}}}]),t}(),W=new T;new G(W);console.log(W)}});
//# sourceMappingURL=app.e5b9adae.js.map