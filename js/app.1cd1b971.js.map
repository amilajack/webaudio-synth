{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/modules/Store.js","webpack:///./src/modules/_colors.js","webpack:///./src/modules/Knob.js","webpack:///./src/modules/Oscillator.js","webpack:///./src/modules/VCO.js","webpack:///./src/modules/VCF.js","webpack:///./src/modules/LFO.js","webpack:///./src/modules/VCA.js","webpack:///./src/modules/Delay.js","webpack:///./src/modules/Keyboard.js","webpack:///./src/modules/_helpers.js","webpack:///./src/modules/_paramSettings.js","webpack:///./src/modules/_notes.js","webpack:///./src/modules/List.js","webpack:///./src/modules/Input.js","webpack:///./src/modules/Options.js","webpack:///./src/modules/ControlItem.js","webpack:///./src/modules/_interfaceSettings.js","webpack:///./src/modules/Wires.js","webpack:///./src/modules/Visual.js","webpack:///./src/modules/Synth.js","webpack:///./src/modules/MIDI.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Store","settings","_this","this","classCallCheck","paramName","callback","subscribers","callbacks","toConsumableArray","concat","broadcast","map","localStorage","setItem","JSON","stringify","setInterval","save","colors","primary","accent","contrast","Knob","id","options","defaultValue","arguments","undefined","input","document","getElementById","createElement","body","appendChild","knobID","$","knob","val","trigger","Math","random","defaultOptions","min","max","step","width","bgColor","fgColor","thickness","angleOffset","angleArc","displayInput","font","fontSize","cursor","change","handleChange","assign","init","Oscillator","context","freq","isFinite","osc","frequency","setValueAtTime","currentTime","volume","gain","type","detune","offset","envelope","node","output","connect","disconnect","now","gate","cancelScheduledValues","easing","linearRampToValueAtTime","attack","sustain","decay","release","createOscillator","start","modulated","createGain","VCO","noteBind","outputNode","oscillators","osc1","osc2","osc3","velocity","oscName","setFrequency","setGain","setDetune","setWavetype","setOffset","setEnvelope","set","play","stop","VCF","filter","Q","createBiquadFilter","LFO","modulatedItems","amount","modulate","modulationSettings","newPorts","keys","startsWith","VCOs","port","modulatedPorts","VCA","updateValues","reconnect","defaultEnvelope","Delay","delay","delayTime","feedback","createDelay","Keyboard","keyDownCallback","keyUpCallback","keyboard","QwertyHancock","keyDown","note","handleKeyDown","keyUp","handleKeyUp","dataset","height","startNote","octaves","whiteKeyColour","blackKeyColour","borderColour","activeColour","getRandom","convertColor","color","toDec","parseInt","toHex","toString","VENDOR","ua","navigator","userAgent","toLowerCase","msie","indexOf","trident","edge","moz","chr","saf","root","getElementsByTagName","orientation","classList","add","defaultSettings","osc1__gain","osc1__detune","osc1__wavetype","osc1__offset","osc2__gain","osc2__detune","osc2__wavetype","osc2__offset","osc3__gain","osc3__detune","osc3__wavetype","osc3__offset","filter__freq","filter__qual","lfo__amount","lfo__freq","lfo__wavetype","delay__gain","delay__time","delay__feedback","delay__cutoff","modulation","lfo__out-1","lfo__out-3","vca__out-1","vca__out-2","savedSettings","parse","getItem","error","console","log","midi","requestMIDIAccess","visualization","List","items","querySelectorAll","updateDOM","item","addEventListener","selectedValue","wavetype","remove","Input","buttonInc","querySelector","buttonDec","inputDOM","getAttribute","Options","defaultParams","container","toggleButton","getElementsByClassName","toggle","optionsDOM","el","status","params","option","ControlItem","controlsDescription","changeStoreParam","ctrl","controlsItems","knobSize","small","medium","big","huge","controlItems","modulationPorts","pos","x","y","Wires","wires","canvas","drawCircle","R","opacity","ctx","getContext","beginPath","arc","PI","lineWidth","strokeStyle","globalAlpha","stroke","drawCurve","startPoint","endPoint","moveTo","controlPoint","quadraticCurveTo","lineCap","loopID","bodyDOM","mousePos","startPort","endPort","drawPorts","portOpacity","drawWires","find","detectPort","detectedPort","checkPort","event","offsetX","offsetY","redraw","portInUse","endDraw","cancelAnimationFrame","loopRedraw","clearRect","requestAnimationFrame","Visual","WIDTH","HEIGHT","sliceWidth","sliceHeight","CENTER","getViewportSize","innerWidth","innerHeight","round","bufferLength","circleRadius","circleAngle","analyser","frequencyBinCount","newCircleParams","startAngle","endAngle","drawArcs","frequencyData","timeDomainData","lineTo","drawBars","render","getByteFrequencyData","getByteTimeDomainData","requestAnimID","createAnalyser","fftSize","maxDecibels","Uint8Array","notes","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","Synth","overallGain","destination","state","resume","then","webkitAudioContext","sAudioContext","AudioContext","resumeAudio","e","alert","store","controls","changeParam","subscribe","entries","_ref","_ref2","slicedToArray","newVCO","forEach","MIDI","synth","message","enable","command","144","128","_this2","midiAccess","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","inputs","values","iterator","next","done","onmidimessage","getMessage","err","return","midiOption","parentNode","removeChild"],"mappings":"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","file":"js/app.1cd1b971.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\nexport default class Store {\n\tconstructor(settings) {\n\n\t\tthis.settings = settings;\n\n\t\t// only settings structure\n\t\tthis.subscribers = {};\n\n\t\t// saving\n\t\twindow.setInterval(this.save, 5000)\n\t}\n\n\tsubscribe = (paramName, callback) => {\n\n\t\tif (this.subscribers[paramName]) {\n\t\t\tlet callbacks = this.subscribers[paramName];\n\n\t\t\tthis.subscribers[paramName] = callbacks ?\n\t\t\t\t[...callbacks, callback]\n\t\t\t\t:\n\t\t\t\t[callback];\n\t\t} else {\n\t\t\tthis.subscribers[paramName] = [callback];\n\t\t};\n\n\t\t// drop settings to new subscriber\n\t\tthis.broadcast(paramName);\n\t}\n\n\tbroadcast = (paramName) => {\n\t\tif (this.subscribers[paramName]) {\n\t\t\tthis.subscribers[paramName].map(callback => callback());\n\t\t}\n\t}\n\n\tchangeParam = (paramName, value) => {\n\n\t\tthis.settings[paramName] = value;\n\n\t\tthis.broadcast(paramName);\n\n\t\t// console.log(this.settings);\n\n\t}\n\n\tsave = () => {\n\t\tlocalStorage.setItem('synthSettings', JSON.stringify(this.settings))\n\t}\n}","\nexport const colors = {\n\tprimary: \t'#768b8E',\n\taccent:\t\t'#A0ffff',\n\tcontrast:\t'#FF6E19'\n};","import $ from 'jquery'\nimport knob from 'jquery-knob';\nimport { colors } from './_colors';\n\n\nexport default class Knob {\n\tconstructor(id, options, defaultValue = 0, callback) {\n\n\t\tthis.id = id || `new-knob-${~~(Math.random()* 100)}`;\n\t\t\n\t\tthis.defaultOptions = {\n\t\t\tmin:\t\t\t1,\n\t\t\tmax:\t\t\t100,\n\t\t\tstep:\t\t\t1,\n\t\t\twidth: \t\t\t'50%',\n\t\t\tbgColor:\t\tcolors.primary,\n\t\t\tfgColor:\t\tcolors.accent,\n\t\t\tthickness: \t\t.2,\n\t\t\tangleOffset: \t-125,\n\t\t\tangleArc:\t\t250,\n\t\t\tdisplayInput:\tfalse,\n\t\t\tfont:\t\t\t'Orbitron',\n\t\t\tfontSize:\t\t10,\n\t\t\tcursor:\t\t\t20,\n\t\t\tchange: \t\tvalue => this.handleChange(value)\n\t\t};\n\t\tthis.options = Object.assign({}, this.defaultOptions, options);\n\t\t\n\t\tthis.callback = callback;\n\n\t\tthis.defaultValue = defaultValue;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\t\t\n\t\tlet input = document.getElementById(this.id);\n\n\t\tif(!input) {\n\t\t\tlet input = document.createElement('input');\n\t\t\tinput.id = this.id;\n\t\t\tinput.value = 1;\n\t\t\tdocument.body.appendChild(input);\n\t\t};\n\n\t\tlet knobID = '#' + this.id;\n\n\t\t$(knobID).knob(this.options);\n\t\t$(knobID).val(this.defaultValue).trigger('change');\n\t}\n\n\thandleChange = (value) => {\n\t\tthis.callback(this.id, value);\n\t}\n};","import Knob from './Knob';\n\n\nexport default class Oscillator {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\n\t\tthis.osc = this.context.createOscillator();\n\t\tthis.osc.start();\n\n\t\tthis.modulated = this.context.createGain();\n\t\tthis.modulated.gain.value = 1;\n\n\t\tthis.volume = this.context.createGain();\n\n\t\tthis.gate = this.context.createGain();\n\t\tthis.gate.gain.value = 0; // note off (muted)\n\n\n\t\tthis.input = this.osc;\n\t\tthis.osc.connect(this.volume);\n\t\tthis.volume.connect(this.modulated);\n\t\tthis.modulated.connect(this.gate);\n\t\tthis.output = this.gate;\n\n\n\t\tthis.detune = 0;\n\t\tthis.offset = 0;\n\n\n\t\tthis.envelope = { // default\n\t\t\tattack: \t.005,\n\t\t\tdecay: \t\t.1,\n\t\t\tsustain: \t.6,\n\t\t\trelease: \t.1\n\t\t};\n\t\tthis.easing = .006; // 6 msec easing\n\t}\n\n\tsetFrequency = freq => {\n\t\tif (isFinite(freq)) {\n\t\t\tthis.osc.frequency.setValueAtTime(freq, this.context.currentTime);\n\t\t};\n\t}\n\n\tsetGain = value => this.volume.gain.value = value;\n\n\tsetWavetype = type => this.osc.type = type;\n\n\tsetDetune = value => {\n\t\tthis.detune = value;\n\t\tthis.osc.detune.setValueAtTime((this.offset + this.detune), this.context.currentTime);\n\t}\n\n\tsetOffset = value => {\n\t\tthis.offset = value * 100;\n\t\tthis.osc.detune.setValueAtTime((this.offset + this.detune), this.context.currentTime);\n\t}\n\n\tsetEnvelope = (paramName, value) => this.envelope[paramName] = value;\t\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n\n\tdisconnect = () => this.output.disconnect();\n\n\tplay = () => {\n\t\tlet now = this.context.currentTime;\n\t\t // shorthand\n\t\tthis.gate.gain.cancelScheduledValues(now);\n\t\tthis.gate.gain.setValueAtTime(0, now + this.easing);\n\t\tthis.gate.gain.linearRampToValueAtTime(1, now + this.envelope.attack + this.easing);\n\t\tthis.gate.gain.linearRampToValueAtTime(\n\t\t\tthis.envelope.sustain,\n\t\t\tnow + this.envelope.attack + this.envelope.decay + this.easing\n\t\t);\n\t}\n\t\t \n\n\tstop = () => {\n\t\tlet now = this.context.currentTime;\n\t\tthis.gate.gain.cancelScheduledValues(now);\n\t\tthis.gate.gain.linearRampToValueAtTime(0, now + this.envelope.release + this.easing);\n\t};\n};","import Oscillator from './Oscillator';\n\n\nexport default class VCO {\n\tconstructor(context, noteBind, outputNode) {\n\n\t\tthis.context = context\n\t\tthis.noteBind = noteBind\n\t\tthis.outputNode = outputNode\n\t\tthis.oscillators = {}\n\n\t\tthis.velocity = this.context.createGain()\n\t\tthis.velocity.connect(this.outputNode.input)\n\n\t\tthis.init()\n\t}\n\n\tinit = () => {\n\n\t\tthis.oscillators = {\n\t\t\tosc1: new Oscillator(this.context),\n\t\t\tosc2: new Oscillator(this.context),\n\t\t\tosc3: new Oscillator(this.context)\n\t\t};\n\n\t\tthis.connect();\n\t}\n\n\tconnect = () => {\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.oscillators[osc].connect(this.velocity)\n\t\t}\n\t}\n\n\tdisconnect = () => {\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.oscillators[osc].disconnect()\n\t\t}\n\t}\n\n\tset = (oscName, paramName, value) => {\n\n\t\tswitch (paramName) {\n\t\t\tcase 'frequency':\n\t\t\t\tfor (let osc in this.oscillators) {\n\t\t\t\t\tthis.oscillators[osc].setFrequency(value);\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\tcase 'gain':\n\t\t\t\tthis.oscillators[oscName].setGain(value);\n\t\t\t\tbreak;\n\t\t\tcase 'detune':\n\t\t\t\tthis.oscillators[oscName].setDetune(value);\n\t\t\t\tbreak;\n\t\t\tcase 'wavetype':\n\t\t\t\tthis.oscillators[oscName].setWavetype(value);\n\t\t\t\tbreak;\n\t\t\tcase 'offset':\n\t\t\t\tthis.oscillators[oscName].setOffset(value);\n\t\t\t\tbreak;\n\t\t\tcase 'velocity':\n\t\t\t\tthis.velocity.gain.value = value / 128;\n\t\t\t\tbreak;\n\t\t\tcase 'attack':\n\t\t\tcase 'decay':\n\t\t\tcase 'sustain':\n\t\t\tcase 'release':\n\t\t\t\tthis.oscillators[oscName].setEnvelope(paramName, value);\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tplay = (freq, velocity = 128) => {\n\t\tthis.set(null, 'frequency', freq);\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.set(null, 'velocity', velocity)\n\t\t\tthis.oscillators[osc].play();\n\t\t};\n\t};\n\n\tstop = () => {\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.oscillators[osc].stop();\n\t\t};\n\t}\n}","import Knob from './Knob';\n\n\nexport default class VCF {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\t\tthis.filter = this.context.createBiquadFilter();\n\t\tthis.filter.type = 'lowpass';\n\n\t\tthis.input = this.filter;\n\t\tthis.output = this.filter;\n\n\t\tthis.modulated = this.context.createGain();\n\t\tthis.modulated.gain.value = 6000; // 6 * 100 cents => -6000..6000 (one octave)\n\n\t\tthis.modulated.connect(this.filter.detune);\n\t}\n\n\tset = (paramName, value) => {\n\n\t\tswitch (paramName) {\n\t\t\tcase 'freq':\n\t\t\t\tthis.filter.frequency.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'qual':\n\t\t\t\tthis.filter.Q.value = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n};","\nexport default class LFO {\n\tconstructor(context, modulatedItems) {\n\n\t\tthis.context = context;\n\t\tthis.modulatedItems = modulatedItems;\n\t\tthis.modulatedPorts = [];\n\t\t\n\t\tthis.osc = this.context.createOscillator();\n\t\tthis.osc.start();\n\n\t\tthis.amount = this.context.createGain();\n\n\t\tthis.osc.connect(this.amount);\n\n\t\tthis.output = this.osc.connect(this.amount);\n\t}\n\n\tset = (paramName, value) => {\n\n\t\tswitch (paramName) {\n\t\t\tcase 'amount':\n\t\t\t\tthis.amount.gain.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'freq':\n\t\t\t\tthis.osc.frequency.setValueAtTime(value, this.context.currentTime);\n\t\t\t\tbreak;\n\t\t\tcase 'wavetype':\n\t\t\t\tthis.osc.type = value;\n\t\t\t\tbreak;\n\t\t\tcase 'modulation':\n\t\t\t\tthis.modulate(value);\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tmodulate = (modulationSettings) => {\n\n\t\tlet newPorts = [];\n\n\t\tObject.keys(modulationSettings).map(key => {\n\n\t\t\tif (key.startsWith('lfo')) { // deal with lfo only\n\n\t\t\t\tlet value = modulationSettings[key];\n\t\t\t\t\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'osc1':\n\t\t\t\t\tcase 'osc2':\n\t\t\t\t\tcase 'osc3':\n\t\t\t\t\t\tlet VCOs = this.modulatedItems['VCOs'];\n\n\t\t\t\t\t\tObject.keys(VCOs).map(key => {\n\t\t\t\t\t\t\tlet port = VCOs[key].oscillators[value].modulated.gain;\n\t\n\t\t\t\t\t\t\tnewPorts.push(port);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'filter':\n\t\t\t\t\t\tlet VCF = this.modulatedItems['VCF'];\n\n\t\t\t\t\t\tlet port = VCF.modulated; // multiplier gain inside\n\n\t\t\t\t\t\tnewPorts.push(port);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t\t// disconnect early ports\n\t\tthis.modulatedPorts.map(port => this.output.disconnect(port));\n\n\t\t// connect new\n\t\tnewPorts.map(port => this.output.connect(port));\n\n\t\tthis.modulatedPorts = newPorts;\n\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n\n\tdisconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.disconnect(node.input);\n\t\t} else {\n\t\t\tthis.output.disconnect(node);\n\t\t};\n\t}\n\n}","\nexport default class VCA {\n\tconstructor(context, modulatedItems) {\n\n\t\tthis.context = context;\n\t\tthis.modulatedItems = modulatedItems;\n\t\tthis.modulatedPorts = [];\n\t\t\n\t\tthis.envelope = {\n\t\t\tattack: \t.005,\n\t\t\tdecay: \t\t.1,\n\t\t\tsustain: \t.6,\n\t\t\trelease: \t.1\n\t\t}\n\t}\n\n\tset = (paramName, value) => {\n\t\tif (paramName === 'modulation') {\n\t\t\tthis.reconnect(value);\n\t\t\treturn;\n\t\t};\n\t\tthis.envelope[paramName] = value;\n\t\tthis.updateValues();\n\t}\n\n\tupdateValues = () => this.modulatedPorts.map(port => port.envelope = this.envelope);\n\n\treconnect = (modulationSettings) => {\n\n\t\tlet newPorts = [];\n\n\t\tObject.keys(modulationSettings).map(key => {\n\n\t\t\tif (key.startsWith('vca')) { // deal with vca only\n\n\t\t\t\tlet value = modulationSettings[key];\n\t\t\t\t\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'osc1':\n\t\t\t\t\tcase 'osc2':\n\t\t\t\t\tcase 'osc3':\n\t\t\t\t\t\tlet VCOs = this.modulatedItems['VCOs'];\n\n\t\t\t\t\t\tObject.keys(VCOs).map(key => {\n\t\t\t\t\t\t\tlet port = VCOs[key].oscillators[value];\n\t\n\t\t\t\t\t\t\tnewPorts.push(port);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'filter':\n\t\t\t\t\t\tdelete(modulationSettings[key]); // for now\n\t\t\t\t\t\tbreak;\n\t\t\t\t};\n\n\t\t\t\tconst defaultEnvelope = { // default\n\t\t\t\t\tattack: \t0,\n\t\t\t\t\tdecay: \t\t0,\n\t\t\t\t\tsustain: \t1,\n\t\t\t\t\trelease: \t0\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.modulatedPorts.map(port => port.envelope = defaultEnvelope);\n\n\t\t\t\tthis.modulatedPorts = newPorts;\n\t\t\t\tthis.updateValues();\n\t\t\t}\n\t\t});\n\t}\n}","\nexport default class Delay {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\t\tthis.delay = this.context.createDelay(15.0);\n\t\tthis.feedback = this.context.createGain();\n\t\tthis.filter = this.context.createBiquadFilter();\n\t\tthis.filter.type = 'lowpass';\n\t\tthis.filter.Q.value = 5;\n\n\t\tthis.volume = this.context.createGain();\n\n\t\tthis.input = this.delay;\n\t\tthis.delay.connect(this.feedback);\n\t\tthis.feedback.connect(this.filter);\n\t\tthis.filter.connect(this.delay);\n\t\tthis.delay.connect(this.volume);\n\t\tthis.output = this.volume;\n\t}\n\n\tset = (paramName, value) => {\n\t\tswitch (paramName) {\n\t\t\tcase 'gain':\n\t\t\t\tthis.volume.gain.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'time':\n\t\t\t\tthis.delay.delayTime.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'feedback':\n\t\t\t\tthis.feedback.gain.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'cutoff':\n\t\t\t\tthis.filter.frequency.value = value;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n}","import { colors } from './_colors';\n\nimport QwertyHancock from 'qwerty-hancock';\n\n\nexport default class Keyboard {\n\tconstructor(options, keyDownCallback, keyUpCallback) {\n\n\t\tthis.defaultOptions = {\n\t\t\tid: 'keyboard',\n\t\t\twidth: 664,\n\t\t\theight: 72,\n\t\t\tstartNote: 'C3',\n\t\t\toctaves: 2,\n\t\t\twhiteKeyColour: 'rgba(38, 39, 47, 0.85)',\n\t\t\tblackKeyColour: '#A0FFFF',\n\t\t\tborderColour: '#A0FFFF',\n\t\t\tactiveColour: '#FF6E19',\n\t\t};\n\n\t\tthis.options = Object.assign({}, this.defaultOptions, options);\n\n\t\tthis.keyDownCallback = keyDownCallback;\n\t\tthis.keyUpCallback = keyUpCallback;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\t\tthis.keyboard = new QwertyHancock(this.options);\n\n\t\tthis.keyboard.keyDown = (note, freq) => this.handleKeyDown(note, freq);\n\t\tthis.keyboard.keyUp = (note, freq) => this.handleKeyUp(note, freq);\n\t}\n\n\thandleKeyDown = (note, freq) => {\n\t\tthis.keyDownCallback(note, freq);\n\t}\n\t\n\thandleKeyUp = (note, freq) => {\n\t\tthis.keyUpCallback(note, freq);\n\t}\n\n\tset = (paramName, value) => {\n\t\tif (value) {\n\t\t\tthis.keyboard.keyDown = (note, freq) => this.handleKeyDown(note, freq);\n\t\t\tthis.keyboard.keyUp = (note, freq) => this.handleKeyUp(note, freq);\n\n\t\t\tdocument.getElementById('keyboard').dataset['enabled'] = true;\n\t\t\treturn;\n\t\t};\n\t\tthis.keyboard.keyDown = (note, freq) => {};\n\t\tthis.keyboard.keyUp = (note, freq) => {};\n\n\t\tdocument.getElementById('keyboard').dataset['enabled'] = false;\n\t}\n}","\nconst getRandom = (min = 0, max = 1) => (Math.random() * (max - min)) + min;\n\n\nconst convertColor = (color) => {\n\treturn {\n\t\ttoDec: () => {\n\t\t\tif ( color.startsWith('#') ) color = color.slice(1);\n\n\t\t\treturn [\n\t\t\t\tparseInt(color.slice(0, 2), 16),\n\t\t\t\tparseInt(color.slice(2, 4), 16),\n\t\t\t\tparseInt(color.slice(4), 16),\n\t\t\t];\n\t\t},\n\t\ttoHex: () => {\n\t\t\treturn (\n\t\t\t\t'#' +\n\t\t\t\tcolor[0].toString(16) + \n\t\t\t\tcolor[1].toString(16) + \n\t\t\t\tcolor[2].toString(16)\n\t\t\t);\n\t\t}\n\t};\n};\n\nlet VENDOR = 'unknown';\n\n(() => {\n\tlet ua\t\t= window.navigator.userAgent.toLowerCase();\n\tlet msie\t= ua.indexOf('msie');\n\tlet trident\t= ua.indexOf('trident');\n\tlet edge\t= ua.indexOf('edge');\n\tlet moz\t\t= ua.indexOf('firefox');\n\tlet chr\t\t= ua.indexOf('chrome');\n\tlet saf\t\t= ua.indexOf('safari');\n\tlet root\t= document.getElementsByTagName('html')[0];\n\n\n\tif (typeof window.orientation !== 'undefined') root.classList.add('mobile-device');\n\n\n\tif (msie > 0 || trident > 0 || edge > 0) {\n\t\tVENDOR = 'any-ie';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else if (moz > 0) {\n\t\tVENDOR = 'any-firefox';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else if (chr > 0) {\n\t\tVENDOR = 'any-chrome';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else if (saf > 0) {\n\t\tVENDOR = 'any-safari';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else {\n\t\treturn false;\n\t}\n\n})();\n\n\n\nexport {\n\tgetRandom,\n\tconvertColor,\n\tVENDOR\n};","import { VENDOR } from './_helpers'\n\nlet defaultSettings = {\n\t// VCO\n\t'osc1__gain': \t.85,\n\t'osc1__detune': 10,\n\t'osc1__wavetype': 'sine',\n\t'osc1__offset':\t7,\n\n\t'osc2__gain': \t.95,\n\t'osc2__detune': 0,\n\t'osc2__wavetype': 'sawtooth',\n\t'osc2__offset':\t0,\n\n\t'osc3__gain': \t.8,\n\t'osc3__detune': -10,\n\t'osc3__wavetype': 'square',\n\t'osc3__offset':\t-12,\n\n\t// VCF\n\t'filter__freq': 1560,\n\t'filter__qual': 6,\n\n\t// LFO\n\t'lfo__amount': .25,\n\t'lfo__freq': 1.25,\n\t'lfo__wavetype': 'sine',\n\n\t// VCA\n\t'attack': \t2.45,\n\t'decay': \t.1,\n\t'sustain': \t.6,\n\t'release': \t1.2,\n\n\t// Delay\n\t'delay__gain':\t\t.2,\n\t'delay__time': \t\t.5,\n\t'delay__feedback': \t.1,\n\t'delay__cutoff': \t1000,\n\n\t// Modulation\n\tmodulation: {\n\t\t'lfo__out-1': 'osc2',\n\t\t'lfo__out-3': 'filter',\n\t\t'vca__out-1': 'osc1',\n\t\t'vca__out-2': 'osc3',\n\t},\n}\n\n// try local storage saved settings\ntry {\n\tlet savedSettings = JSON.parse(localStorage.getItem('synthSettings'))\n\n\tif (savedSettings) defaultSettings = savedSettings\n\n} catch (error) {\n\tconsole.log('No saved setting found')\n}\n\ndefaultSettings.options = {\n\tmidi: !!navigator.requestMIDIAccess,\n\tkeyboard: true,\n\tvisualization: (VENDOR === 'any-chrome')\n}\n\nexport { defaultSettings }\n","\nlet notes = {\n\t21: { name: 'A0',  freq: 27.5000000000 },\n\t22: { name: 'A#0', freq: 29.1352350949 },\n\t23: { name: 'B0',  freq: 30.8677063285 },\n\n\t24: { name: 'C1',  freq: 32.7031956626 },\n\t25: { name: 'C#1', freq: 34.6478288721 },\n\t26: { name: 'D1',  freq: 36.7080959897 },\n\t27: { name: 'D#1', freq: 38.8908729653 },\n\t28: { name: 'E1',  freq: 41.2034446141 },\n\t29: { name: 'F1',  freq: 43.6535289291 },\n\t30: { name: 'F#1', freq: 46.2493028390 },\n\t31: { name: 'G1',  freq: 48.9994294977 },\n\t32: { name: 'G#1', freq: 51.9130871975 },\n\t33: { name: 'A1',  freq: 55.0000000000 },\n\t34: { name: 'A#1', freq: 58.2704701898 },\n\t35: { name: 'B1',  freq: 61.7354126570 },\n}\n\n\n// create other octaves\nfor (let i = 24; i < 128; i++) {\n\tnotes[i + 12] = {\n\t\tname: notes[i].name.slice(0, -1) + (~~(i / 12)),\n\t\tfreq: notes[i].freq * 2,\n\t}\n}\n\nexport default notes\n","\nexport default class List {\n\tconstructor(id, defaultValue = 'sine', callback) {\n\n\t\tthis.id = id;\n\t\tthis.defaultValue = defaultValue;\n\t\tthis.callback = callback;\n\n\t\tthis.items = [];\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.items = [...document.querySelectorAll(`#${this.id} li`)];\n\t\tthis.updateDOM(this.defaultValue); // add class to list item\n\n\t\tthis.items.map(item => {\n\t\t\titem.addEventListener('click', () => {\n\t\t\t\tlet selectedValue = item.dataset.wavetype; // selected wavetype\n\n\t\t\t\tthis.callback(this.id, selectedValue);\n\n\t\t\t\tthis.updateDOM(selectedValue);\n\t\t\t});\n\t\t});\n\t}\n\n\tupdateDOM = value => {\n\t\tthis.items.map(item => {\n\t\t\tif (item.dataset.wavetype === value) {\n\t\t\t\titem.classList.add('selected');\n\t\t\t} else {\n\t\t\t\titem.classList.remove('selected');\n\t\t\t}\n\t\t});\n\t}\n}","\nexport default class Input {\n\tconstructor(id, defaultValue = 0, callback) {\n\n\t\tthis.id = id;\n\t\tthis.value = defaultValue;\n\t\tthis.callback = callback;\n\n\t\tthis.inputDOM = document.querySelector(`#${this.id} input`);\n\t\tthis.inputDOM.value = this.value\n\n\n\t\tthis.min = this.inputDOM.getAttribute('min') || -12;\n\t\tthis.max = this.inputDOM.getAttribute('max') || 12;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.buttonInc = document.querySelector(`#${this.id} .step-up`);\n\t\tthis.buttonDec = document.querySelector(`#${this.id} .step-down`);\n\n\t\t\n\t\tthis.buttonInc.addEventListener('click', () => {\n\t\t\t\n\t\t\tif (this.value < this.max) {\n\t\t\t\t++this.value;\n\n\t\t\t\tthis.updateDOM();\n\t\t\t};\n\n\t\t});\n\n\t\tthis.buttonDec.addEventListener('click', () => {\n\t\t\t\n\t\t\tif (this.value > this.min) {\n\n\t\t\t\t--this.value;\n\n\t\t\t\tthis.updateDOM();\n\t\t\t};\n\n\t\t});\n\t}\n\n\tupdateDOM = value => {\n\n\t\tthis.callback(this.id, this.value);\n\t\t\n\t\tthis.inputDOM.value = this.value;\n\n\t};\n}","import Store from './Store';\n\nexport default class Options {\n\tconstructor(id, defaultParams, callback) {\n\n\t\tthis.id = id;\n\t\tthis.params = defaultParams;\n\t\tthis.callback = callback;\n\n\t\tthis.optionsDOM = [];\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\t\t\n\t\tthis.container = document.getElementById(this.id);\n\t\tthis.toggleButton = this.container.getElementsByClassName('toggle-options')[0];\n\n\t\t// show/hide options list\n\t\tthis.toggleButton.addEventListener('click', () => {\n\t\t\tthis.container.classList.toggle('visible');\n\t\t});\n\n\t\t// options click events\n\t\tthis.optionsDOM = this.container.getElementsByTagName('li');\n\n\t\t[...this.optionsDOM].map(el => {\n\n\t\t\t// toggle initial params\n\t\t\tel.dataset.status = (this.params[el.dataset.option] ? 'on' : 'off')\n\n\t\t\tel.addEventListener('click', () => {\n\t\t\t\tthis.params[el.dataset.option] = !this.params[el.dataset.option];\n\n\t\t\t\tthis.callback(this.id, this.params);\n\n\t\t\t\tthis.updateDOM();\n\t\t\t});\n\t\t});\n\n\t}\n\n\tupdateDOM = () => {\n\t\t// console.log(this.params);\n\n\t\t[...this.optionsDOM].map(el => {\n\t\t\tel.dataset.status = (this.params[el.dataset.option] ? 'on' : 'off');\n\t\t});\n\t}\n}","import { defaultSettings as settings } from './_paramSettings';\n\nimport Knob from './Knob';\nimport List from './List';\nimport Input from './Input';\nimport Options from './Options';\n\n\nexport default class ControlItem {\n\tconstructor(controlsDescription, changeStoreParam) {\n\n\t\tthis.controlsDescription = controlsDescription;\n\t\tthis.changeStoreParam = changeStoreParam;\n\n\t\tthis.controlsItems = [];\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tlet ctrl = this.controlsDescription;\n\n\t\tswitch (ctrl.type) {\n\t\t\tcase 'knob':\n\t\t\t\tthis.controlsItems.push(new Knob(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tctrl.options,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t\t\tbreak;\n\t\t\tcase 'list':\n\t\t\t\tthis.controlsItems.push(new List(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t\t\tbreak;\n\t\t\tcase 'input':\n\t\t\t\tthis.controlsItems.push(new Input(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t\t\tbreak;\n\t\t\tcase 'options':\n\t\t\t\tthis.controlsItems.push(new Options(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t};\n\n\t}\n}","\nconst knobSize = {\n\tsmall: 40,\n\tmedium: 60,\n\tbig: 90,\n\thuge: 110\n};\n\n\nconst controlItems = [\n\t// VCO\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc1__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc1__detune',\n\t\toptions: {\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tmin: -100,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tthickness: .3\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'osc1__wavetype'\n\t},\n\t{\n\t\ttype: 'input',\n\t\tid: 'osc1__offset'\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc2__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t},\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc2__detune',\n\t\toptions: {\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tmin: -100,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tthickness: .3\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'osc2__wavetype'\n\t},\n\t{\n\t\ttype: 'input',\n\t\tid: 'osc2__offset'\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc3__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc3__detune',\n\t\toptions: {\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tmin: -100,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tthickness: .3\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'osc3__wavetype'\n\t},\n\t{\n\t\ttype: 'input',\n\t\tid: 'osc3__offset'\n\t},\n\n\t// VCF\n\t{\n\t\ttype: 'knob',\n\t\tid: 'filter__freq',\n\t\toptions: {\n\t\t\tmin: 32,\n\t\t\tmax: 7902,\n\t\t\twidth: knobSize.big,\n\t\t\theight: knobSize.big,\n\t\t\tdisplayInput: true\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'filter__qual',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 10,\n\t\t\tstep: .1,\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tthickness: .3,\n\t\t}\n\t},\n\n\t// LFO\n\t{\n\t\ttype: 'knob',\n\t\tid: 'lfo__amount',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'lfo__freq',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 20,\n\t\t\tstep: .05,\n\t\t\twidth: knobSize.big,\n\t\t\theight: knobSize.big,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'lfo__wavetype'\n\t},\n\n\t// VCA (ADSR)\n\t{\n\t\ttype: 'knob',\n\t\tid: 'attack',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 4,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'decay',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 4,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'sustain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'release',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 8,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\n\t// Delay\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__time',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 5,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.big,\n\t\t\theight: knobSize.big,\n\t\t\t// displayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__feedback',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: .9,\n\t\t\tstep: .01,\n\t\t\tthickness: .3,\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__cutoff',\n\t\toptions: {\n\t\t\tmin: 30,\n\t\t\tmax: 6000,\n\t\t\tstep: 1,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\n\t{\n\t\ttype: 'options',\n\t\tid: 'options'\n\t}\n];\n\n\nconst modulationPorts = [\n\t// osc ports\n\t{\n\t\tname: 'osc1',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 30,\n\t\t\ty: 330\n\t\t}\n\t},\n\t{\n\t\tname: 'osc2',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 70,\n\t\t\ty: 330\n\t\t}\n\t},\n\t{\n\t\tname: 'osc3',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 110,\n\t\t\ty: 330\n\t\t}\n\t},\n\n\t// filter ports\n\t{\n\t\tname: 'filter',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 305,\n\t\t\ty: 150\n\t\t}\n\t},\n\n\t// lfo ports\n\t{\n\t\tname: 'lfo__out-1',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 345,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-2',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 375,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-3',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 405,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-4',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 435,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-5',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 465,\n\t\t\ty: 330,\n\t\t}\n\t},\n\n\t// vca ports\n\t{\n\t\tname: 'vca__out-1',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 510,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-2',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 540,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-3',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 570,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-4',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 600,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-5',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 630,\n\t\t\ty: 330,\n\t\t}\n\t}\n];\n\n\nexport {\n\tcontrolItems,\n\tmodulationPorts\n};","import { colors } from './_colors';\nimport { modulationPorts } from './_interfaceSettings';\nimport { defaultSettings } from './_paramSettings';\n\n\nexport default class Wires {\n\tconstructor(defaultSettings, changeStoreParam) {\n\n\t\tthis.modulationSettings = defaultSettings;\n\t\tthis.changeStoreParam = changeStoreParam;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.wires = [];\n\n\t\tthis.canvas = document.getElementById('wires');\n\n\t\t// drawing functions\n\t\tthis.canvas.drawCircle = (x, y, R = 5, opacity = 1) => {\n\t\t\tconst ctx = this.canvas.getContext('2d');\n\t\t\tctx.beginPath();\n\t\n\t\t\tctx.arc(x, y, R, 0, 2*Math.PI);\n\t\t\tctx.lineWidth = 6;\n\t\t\tctx.strokeStyle = '#111111';\n\t\t\tctx.globalAlpha = opacity;\n\t\t\tctx.stroke();\n\n\t\t\tctx.lineWidth = 5;\n\t\t\tctx.strokeStyle = colors.accent;\n\t\t\tctx.stroke();\n\t\t};\n\n\t\tthis.canvas.drawCurve = (startPoint, endPoint) => {\n\t\t\tconst ctx = this.canvas.getContext('2d');\n\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(startPoint.x, startPoint.y);\n\n\t\t\tlet controlPoint = {\n\t\t\t\tx: (startPoint.x + endPoint.x) / 2,\n\t\t\t\ty: (startPoint.y + endPoint.y),\n\t\t\t};\n\n\t\t\tctx.quadraticCurveTo(controlPoint.x, controlPoint.y, endPoint.x, endPoint.y);\n\t\t\tctx.lineWidth = 6;\n\t\t\tctx.lineCap = 'round';\n\t\t\tctx.strokeStyle = '#111111';\n\t\t\tctx.globalAlpha = 1;\n\t\t\tctx.stroke();\n\n\t\t\tctx.lineWidth = 4;\n\t\t\tctx.strokeStyle = colors.accent;\n\t\t\tctx.stroke();\n\t\t};\n\n\n\t\tconst bodyDOM = document.querySelector('body');\n\t\tlet onDrawingCurve = false; // curve drawing state\n\t\tlet highlightPortType;\t\t// for fading port port with same type\n\t\tlet mousePos \t= {};\n\t\tlet port \t\t= {};\n\t\tlet startPort \t= {}; \n\t\tlet endPort \t= {};\n\n\t\tlet selectedPort = {};\n\t\tlet loopID;\n\n\n\t\t// draw ports\n\t\tconst drawPorts = (startPort) => {\n\n\t\t\tmodulationPorts.map(port => {\n\t\t\t\tlet portOpacity;\n\n\t\t\t\tif (startPort.type) {\n\t\t\t\t\tportOpacity = (startPort.type !== port.type || startPort.name === port.name) ? 1 : .5;\n\t\t\t\t} else {\n\t\t\t\t\tportOpacity = 1;\n\t\t\t\t};\n\n\t\t\t\tthis.canvas.drawCircle(\n\t\t\t\t\tport.pos.x,\n\t\t\t\t\tport.pos.y,\n\t\t\t\t\t4,\n\t\t\t\t\tportOpacity\n\t\t\t\t);\n\t\t\t});\n\t\t};\n\n\t\tconst drawWires = () => {\n\n\t\t\tObject.keys(this.modulationSettings).map(key => {\n\t\t\t\tthis.canvas.drawCurve(\n\t\t\t\t\t(modulationPorts.find(item => item.name === key)).pos,\n\t\t\t\t\t(modulationPorts.find(item => item.name === this.modulationSettings[key])).pos\n\t\t\t\t);\n\t\t\t});\n\n\t\t};\n\n\t\tconst detectPort = (easing = 10) => {\n\t\t\tlet detectedPort;\n\n\t\t\tmodulationPorts.map(port => {\n\t\t\t\tif ( (mousePos.x >= (port.pos.x - easing)) && (mousePos.x <= (port.pos.x + easing)) ) {\n\t\t\t\t\tif ( (mousePos.y >= (port.pos.y - easing)) && (mousePos.y <= (port.pos.y + easing)) ) {\n\t\t\t\t\t\tdetectedPort = port;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\t\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn detectedPort;\n\t\t};\n\n\t\tconst checkPort = (port) => {\n\t\t\tlet keys = Object.keys(this.modulationSettings);\n\t\t\tswitch (port.type) {\n\t\t\t\tcase 'out':\n\t\t\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\t\t\tif (keys[i] === port.name) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t[keys[i]]: this.modulationSettings[keys[i]]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'in':\n\t\t\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\t\t\tif (this.modulationSettings[keys[i]] === port.name) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t[keys[i]]: this.modulationSettings[keys[i]]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\t// mouse events\n\t\tthis.canvas.addEventListener('mousemove', event => {\n\t\t\tmousePos.x = event.offsetX;\n\t\t\tmousePos.y = event.offsetY;\n\t\t});\t\n\n\t\tthis.canvas.addEventListener('mousedown', event => {\n\t\t\t\n\t\t\tport = detectPort();\n\n\t\t\tif (port) { // if this is a port, not random place on canvas\n\t\t\t\tredraw(true);\n\t\t\t\tbodyDOM.classList.add('on-wires-drawing');\n\t\t\t\tstartPort = {};\n\t\t\t\tendPort   = {}; // clear previous\n\n\t\t\t\tlet portInUse = checkPort(port);\n\n\t\t\t\tif (portInUse) {\n\n\t\t\t\t\tlet key = Object.keys(portInUse)[0];\n\n\t\t\t\t\tswitch (port.type) {\n\t\t\t\t\t\tcase 'in':\n\t\t\t\t\t\t\tstartPort = modulationPorts.find(item => item.name === key);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'out':\n\t\t\t\t\t\t\tstartPort = modulationPorts.find(item => item.name === portInUse[key]);\n\t\t\t\t\t};\n\n\t\t\t\t\tdelete this.modulationSettings[key]; // delete that connection\n\t\t\t\t\tthis.changeStoreParam('modulation', this.modulationSettings); // update in store\n\n\t\t\t\t} else {\n\t\t\t\t\tstartPort = modulationPorts.find(item => item.name === port.name);\n\t\t\t\t}\n\n\t\t\t};\n\t\t});\n\n\t\tthis.canvas.addEventListener('mouseup', event => {\n\n\t\t\tport = detectPort();\n\n\t\t\tif (port) {\n\n\t\t\t\tif (checkPort(port)) {\n\t\t\t\t\tendDraw();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\n\t\t\t\tendPort = modulationPorts.find(item => item.name === port.name)\n\n\t\t\t\t// add new wire\n\t\t\t\tif ( (startPort.pos && endPort.pos) && (startPort.type !== endPort.type) ) {\n\t\n\t\t\t\t\tswitch (startPort.type) { // sort to { out: in }\n\t\t\t\t\t\tcase 'out':\n\t\t\t\t\t\t\tthis.modulationSettings[startPort.name] = endPort.name;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'in':\n\t\t\t\t\t\t\tthis.modulationSettings[endPort.name] = startPort.name;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.changeStoreParam('modulation', this.modulationSettings); // update store\n\n\t\t\t\t};\n\n\t\t\t};\n\n\t\t\tendDraw();\n\t\t});\n\n\n\t\tconst endDraw = () => {\n\t\t\tonDrawingCurve = false;\n\t\n\t\t\tbodyDOM.classList.remove('on-wires-drawing');\n\t\t\tport = {};\n\t\t\tstartPort = {};\n\t\t\tendPort = {};\n\t\n\t\t\twindow.cancelAnimationFrame(loopID);\n\t\t\tredraw(false); // call once\n\t\t};\n\n\t\tconst redraw = (loopRedraw = false) => {\n\n\t\t\tconst ctx = this.canvas.getContext('2d');\n\n\t\t\t// clear previous drawings\n\t\t\tctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\t\tdrawPorts(startPort);\n\t\t\tdrawWires();\n\n\t\t\tif (loopRedraw) {\n\t\t\t\t// draw new wire\n\t\t\t\tthis.canvas.drawCurve(\n\t\t\t\t\tstartPort.pos ? startPort.pos : mousePos,\n\t\t\t\t\tendPort.pos   ?  endPort.pos  : mousePos\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tloopID = window.requestAnimationFrame(redraw);\n\t\t\t}\n\t\t};\n\t\tredraw(); // call for first draw\n\t\t\n\n\t}\n}","import { colors } from './_colors';\nimport { getRandom, convertColor } from './_helpers';\nimport { defaultSettings as settings } from './_paramSettings';\n\n\nexport default class Visual {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\n\t\tthis.analyser = this.context.createAnalyser();\n\t\tthis.analyser.fftSize = 512;\n\t\tthis.analyser.maxDecibels = 0;\n\t\tthis.bufferLength = this.analyser.frequencyBinCount;\n\n\t\tthis.frequencyData = new Uint8Array(this.bufferLength);\n\t\tthis.timeDomainData = new Uint8Array(this.bufferLength)\n\n\t\tthis.input = this.analyser;\n\t\tthis.output = this.analyser;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.canvas = document.getElementById('visual');\n\n\t\tconst ctx = this.canvas.getContext('2d');\n\n\t\tlet WIDTH\n\t\tlet HEIGHT\n\t\tlet CENTER = {}\n\n\t\tlet sliceWidth\n\t\tlet sliceHeight\n\t\tlet offsetY\n\n\t\tconst getViewportSize = () => {\n\t\t\tWIDTH = window.innerWidth\n\t\t\tHEIGHT = window.innerHeight\n\t\t\tCENTER = {\n\t\t\t\tx: WIDTH / 2,\n\t\t\t\ty: HEIGHT / 2,\n\t\t\t}\n\n\t\t\tthis.canvas.width = WIDTH\n\t\t\tthis.canvas.height = HEIGHT\n\n\t\t\tsliceWidth = Math.round(WIDTH / this.bufferLength)\n\t\t\tsliceHeight = Math.round(HEIGHT / 8)\n\t\t\toffsetY = CENTER.y - sliceHeight / 2\n\t\t};\n\t\tgetViewportSize()\n\n\t\tthis.colors = {\n\t\t\taccent: convertColor(colors.accent).toDec(),\n\t\t\tcontrast: convertColor(colors.contrast).toDec(),\n\t\t}\n\n\t\twindow.addEventListener('resize', () => getViewportSize())\n\n\n\t\tconst circleRadius = (HEIGHT)\n\n\t\t// create arcs angles\n\t\tlet circleAngle = []\n\n\t\tfor (let i = 0; i <= this.analyser.frequencyBinCount; i++) {\n\t\t\tlet newCircleParams = {\n\t\t\t\tstartAngle: getRandom(-2 * Math.PI, 2 * Math.PI),\n\t\t\t\tendAngle: getRandom(-2 * Math.PI, 2 * Math.PI),\n\t\t\t}\n\t\t\tcircleAngle.push(newCircleParams)\n\t\t}\n\n\n\t\t// draw functions\n\t\tconst drawArcs = () => {\n\n\t\t\t// create many arcs\n\t\t\tfor (let i = 0; i < this.bufferLength; i++) {\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(\n\t\t\t\t\tWIDTH,\n\t\t\t\t\tCENTER.y,\n\t\t\t\t\t~~(circleRadius * (this.frequencyData[i] / 255)),\n\t\t\t\t\tcircleAngle[i].startAngle,\n\t\t\t\t\tcircleAngle[i].endAngle\n\t\t\t\t);\n\t\t\t\tctx.lineWidth = 1;\n\t\t\t\tctx.strokeStyle = `rgba(${this.colors.contrast}, \n\t\t\t\t\t\t\t\t\t\t${this.frequencyData[i] / 255})`;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tctx.stroke();\n\n\t\t\t};\n\n\t\t};\n\n\n\t\tlet x\n\t\tlet y\n\n\t\tconst drawCurve = () => {\n\n\t\t\tctx.beginPath()\n\n\t\t\tx = 0\n\t\t\ty = 0\n\n\t\t\tctx.lineWidth = 1\n\t\t\tctx.strokeStyle = `${colors.accent}`\n\n\t\t\tctx.moveTo(0, CENTER.y)\n\n\t\t\tfor (let i = 0; i < this.bufferLength; i++) {\n\n\t\t\t\ty = (sliceHeight * (this.timeDomainData[i] / 255) + offsetY)\n\n\t\t\t\tctx.lineTo(x, y)\n\n\t\t\t\tx += sliceWidth\n\t\t\t}\n\n\t\t\tctx.moveTo(WIDTH, CENTER.y)\n\t\t\tctx.stroke()\n\t\t\t\n\t\t}\n\n\n\t\tconst drawBars = () => {\n\n\t\t\t// direction\n\t\t\tlet m = 1;\n\n\t\t\tfor (let i = 0; i < this.bufferLength; i++) {\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(WIDTH, (i * m) + CENTER.y);\n\n\t\t\t\tctx.lineTo(\n\t\t\t\t\tWIDTH - this.frequencyData[i],\n\t\t\t\t\t(i * m) + CENTER.y\n\t\t\t\t);\n\n\t\t\t\tctx.strokeStyle = `rgba(${this.colors.accent},\n\t\t\t\t\t\t\t\t\t\t${this.frequencyData[i] / 255})`;\n\t\t\t\tctx.stroke();\n\n\t\t\t\t// change direction\n\t\t\t\tm *= -1;\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = () => {\n\n\t\t\t// clear previous drawings\n\t\t\tctx.clearRect(0, 0, WIDTH, HEIGHT);\n\n\t\t\tthis.analyser.getByteFrequencyData(this.frequencyData);\n\t\t\tthis.analyser.getByteTimeDomainData(this.timeDomainData);\n\n\t\t\tdrawArcs();\n\t\t\tdrawCurve();\n\t\t\tdrawBars();\n\n\t\t\tthis.requestAnimID = requestAnimationFrame(this.render);\n\t\t}\n\n\t}\n\n\tset = (paramName, value) => {\n\t\tif (value) {\n\t\t\tthis.render()\n\t\t\tdocument.getElementById('visual').dataset['visible'] = true\n\t\t\treturn\n\t\t}\n\n\t\tcancelAnimationFrame(this.requestAnimID);\n\t\tdocument.getElementById('visual').dataset['visible'] = false\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n}","import { AudioContext as sAudioContext } from 'standardized-audio-context';\n\nimport Store from './Store'\nimport VCO from './VCO'\nimport VCF from './VCF'\nimport LFO from './LFO'\nimport VCA from './VCA'\nimport Delay from './Delay'\nimport Keyboard from './Keyboard'\nimport ControlItem from './ControlItem'\nimport Wires from './Wires'\nimport Visual from './Visual'\n\nimport { controlItems } from './_interfaceSettings';\nimport { defaultSettings as settings } from './_paramSettings';\nimport notes from './_notes';\n\n\nexport default class Synth {\n\tconstructor() {\n\n\t\ttry {\n\t\t\tthis.context = window.webkitAudioContext\n\t\t\t\t? new sAudioContext()\n\t\t\t\t: new AudioContext()\n\n\t\t\tdocument.body.addEventListener('mousedown', this.resumeAudio)\n\t\t\tdocument.body.addEventListener('keydown', this.resumeAudio)\n\t\t}\n\t\tcatch (e) {\n\t\t\talert('Web Audio API is not supported in this browser');\n\t\t\treturn;\n\t\t};\n\n\t\tthis.store = new Store(settings);\n\n\n\t\t// creating controls\n\t\tthis.controls = [];\n\n\t\tcontrolItems.map(item => {\n\t\t\tthis.controls.push(\n\t\t\t\tnew ControlItem(\n\t\t\t\t\titem,\n\t\t\t\t\tthis.store.changeParam,\n\t\t\t\t\tthis.store.subscribe // for wavetype list select highlighting\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\n\n\t\t// creating filter \n\t\tthis.VCF = new VCF(this.context);\n\t\t['freq', 'qual'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`filter__${paramName}`,\n\t\t\t\t() => this.VCF.set(paramName, this.store.settings[`filter__${paramName}`])\n\t\t\t)\n\t\t});\n\n\n\t\tthis.VCOs = {}\n\t\tObject.entries(notes).map(([ n, note ]) => {\n\n\t\t\tlet newVCO = new VCO(this.context, note.name, this.VCF)\n\n\t\t\t// creating osclillators for every key(note)\n\t\t\t// and binding it with settings store\n\t\t\tObject.keys(newVCO.oscillators).forEach(oscName => {\n\t\t\t\t['gain', 'detune', 'wavetype', 'offset'].forEach(paramName => {\n\t\t\t\t\tthis.store.subscribe(\n\t\t\t\t\t\t`${oscName}__${paramName}`,\n\t\t\t\t\t\t() => newVCO.set(\n\t\t\t\t\t\t\toscName,\n\t\t\t\t\t\t\tparamName,\n\t\t\t\t\t\t\tthis.store.settings[`${oscName}__${paramName}`]\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tthis.VCOs = Object.assign({}, this.VCOs, {\n\t\t\t\t[note.name]: newVCO\n\t\t\t})\n\t\t})\n\n\t\t// creating keyboard and bindings\n\t\tthis.keyboard = new Keyboard(\n\t\t\t{ id: 'keyboard', startNote: 'C3' },\n\t\n\t\t\t(note, freq) => this.play(note, freq), // 'keyPressed' event callback\n\t\t\t\n\t\t\t(note, freq) => this.stop(note) // 'keyUp' event callback -> stop oscillators\n\t\t);\n\t\tthis.store.subscribe(\n\t\t\t'options',\n\t\t\t() => this.keyboard.set('enabled', this.store.settings.options.keyboard)\n\t\t);\n\n\n\t\t// creating LFO modulator\n\t\tthis.LFO = new LFO(\n\t\t\tthis.context,\n\t\t\t{ VCOs: this.VCOs, VCF: this.VCF } // objects that will be modulated\n\t\t);\n\t\t['amount', 'freq', 'wavetype'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`lfo__${paramName}`,\n\t\t\t\t() => this.LFO.set(paramName, this.store.settings[`lfo__${paramName}`])\n\t\t\t)\n\t\t});\n\t\t// subscribe LFO for wires connection changes\n\t\tthis.store.subscribe(\n\t\t\t'modulation',\n\t\t\t() => this.LFO.set('modulation', this.store.settings['modulation'])\n\t\t);\n\n\n\t\t// creating VCA (ADSR) modulator\n\t\tthis.VCA = new VCA(\n\t\t\tthis.context,\n\t\t\t{ VCOs: this.VCOs, VCF: this.VCF }\n\t\t);\n\t\t['attack', 'decay', 'sustain', 'release'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`${paramName}`,\n\t\t\t\t() => this.VCA.set(paramName, this.store.settings[`${paramName}`])\n\t\t\t)\n\t\t});\n\t\tthis.store.subscribe(\n\t\t\t'modulation',\n\t\t\t() => this.VCA.set('modulation', this.store.settings['modulation'])\n\t\t);\n\n\n\t\t// creating delay\n\t\tthis.Delay = new Delay(this.context);\n\t\t['gain', 'time', 'feedback', 'cutoff'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`delay__${paramName}`,\n\t\t\t\t() => this.Delay.set(paramName, this.store.settings[`delay__${paramName}`])\n\t\t\t)\n\t\t});\n\n\n\t\t// creating wires\n\t\tthis.Wires = new Wires(\n\t\t\tthis.store.settings.modulation, // default params\n\t\t\tthis.store.changeParam\n\t\t)\n\n\n\t\t// creating visualization\n\t\tthis.Visual = new Visual(this.context)\n\t\tthis.store.subscribe(\n\t\t\t'options',\n\t\t\t() => this.Visual.set('visible', this.store.settings.options.visualization)\n\t\t)\n\n\t\n\t\tthis.init()\n\t}\n\n\tinit = () => {\n\n\t\tthis.overallGain = this.context.createGain()\n\t\tthis.overallGain.gain.value = .5\n\n\t\t// connections\n\t\tthis.VCF.connect(this.Delay)\n\t\tthis.VCF.connect(this.overallGain)\n\t\tthis.Delay.connect(this.overallGain)\n\t\tthis.overallGain.connect(this.Visual.input)\n\t\tthis.Visual.connect(this.context.destination)\n\n\t\tdocument.body.classList.add('loaded')\n\t}\n\n\tplay = (note, freq, velocity) => this.VCOs[note].play(freq, velocity)\n\n\tstop = note => this.VCOs[note].stop()\n\n\tresumeAudio = () => {\n\t\tif (this.context.state !== 'suspended') return\n\n\t\tthis.context.resume().then(() => {\n\t\t\tconsole.log('Playback resumed successfully')\n\t\t})\n\t}\n}","import notes from './_notes'\n\nexport default class MIDI {\n\tconstructor(synth) {\n\t\tthis.synth = synth\n\t\tthis.enable = false\n\n\t\tthis.init()\n\t}\n\n\tinit() {\n\t\tif (navigator.requestMIDIAccess) {\n\t\t\tconsole.log('This browser supports MIDI')\n\n\t\t\tnavigator.requestMIDIAccess()\n\t\t\t\t.then(\n\t\t\t\t\tmidiAccess => {\n\t\t\t\t\t\tfor (let input of midiAccess.inputs.values()) {\n\t\t\t\t\t\t\tinput.onmidimessage = this.getMessage\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => console.log('Could not access your MIDI devices'),\n\t\t\t\t)\n\t\t} else {\n\t\t\tconsole.log('MIDI is not supported in this browser')\n\n\t\t\tlet midiOption = document.querySelector('li[data-option=\"midi\"]')\n\n\t\t\tmidiOption.parentNode.removeChild(midiOption)\n\t\t}\n\t}\n\n\tset(value) {\n\t\tthis.enable = value\n\t}\n\n\tgetMessage = message => {\n\t\tif (!this.enable) return\n\n\t\tlet command = message.data[0]\n\t\tlet note = notes[ message.data[1] ]\n\t\tlet velocity = (message.data.length > 2) ? message.data[2] : 0; // a velocity value might not be included with a noteOff command\n\n\t\tif (!note) return\n\n\t\t({\n\t\t\t144: () => {\n\t\t\t\tif (velocity > 0) {\n\t\t\t\t\t// this.synth.resumeAudio()\n\n\t\t\t\t\tthis.synth.play(note.name, note.freq, velocity)\n\n\t\t\t\t} else this.synth.stop(note.name)\n\t\t\t},\n\n\t\t\t128: () => this.synth.stop(note.name),\n\n\t\t})[command]()\n\t}\n}","import './styles/main.styl'\n\nimport Synth from './modules/Synth'\nimport MIDI from './modules/MIDI'\n\nconst synth = new Synth()\nconst midi = new MIDI(synth)\n\nsynth.store.subscribe(\n\t'options',\n\t() => midi.set(synth.store.settings.options.midi)\n)\n\nconsole.log(synth)\n"],"sourceRoot":""}