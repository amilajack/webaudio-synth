{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/modules/Store.js","webpack:///./src/modules/_colors.js","webpack:///./src/modules/Knob.js","webpack:///./src/modules/Oscillator.js","webpack:///./src/modules/VCO.js","webpack:///./src/modules/VCF.js","webpack:///./src/modules/LFO.js","webpack:///./src/modules/VCA.js","webpack:///./src/modules/Delay.js","webpack:///./src/modules/Keyboard.js","webpack:///./src/modules/_helpers.js","webpack:///./src/modules/_paramSettings.js","webpack:///./src/modules/List.js","webpack:///./src/modules/Input.js","webpack:///./src/modules/Options.js","webpack:///./src/modules/ControlItem.js","webpack:///./src/modules/_interfaceSettings.js","webpack:///./src/modules/Wires.js","webpack:///./src/modules/Visual.js","webpack:///./src/modules/_notes.js","webpack:///./src/modules/Synth.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Store","settings","_this","this","classCallCheck","paramName","callback","subscribers","callbacks","toConsumableArray","concat","broadcast","map","colors","primary","accent","contrast","Knob","id","options","defaultValue","arguments","undefined","input","document","getElementById","createElement","body","appendChild","knobID","$","knob","val","trigger","Math","random","defaultOptions","min","max","step","width","bgColor","fgColor","thickness","angleOffset","angleArc","displayInput","font","fontSize","cursor","change","handleChange","assign","init","Oscillator","context","freq","isFinite","osc","frequency","setValueAtTime","currentTime","volume","gain","type","detune","offset","envelope","node","output","connect","disconnect","now","gate","cancelScheduledValues","easing","linearRampToValueAtTime","attack","sustain","decay","release","createOscillator","start","modulated","createGain","VCO","noteBind","outputNode","oscillators","osc1","osc2","osc3","oscName","setFrequency","setGain","setDetune","setWavetype","setOffset","setEnvelope","set","play","stop","VCF","filter","Q","createBiquadFilter","LFO","modulatedItems","amount","modulate","modulationSettings","newPorts","keys","startsWith","VCOs","port","modulatedPorts","VCA","updateValues","reconnect","defaultEnvelope","Delay","delay","delayTime","feedback","createDelay","Keyboard","keyDownCallback","keyUpCallback","keyboard","QwertyHancock","keyDown","note","handleKeyDown","keyUp","handleKeyUp","dataset","height","startNote","octaves","whiteKeyColour","blackKeyColour","borderColour","activeColour","getRandom","convertColor","color","toDec","parseInt","toHex","toString","VENDOR","ua","navigator","userAgent","toLowerCase","msie","indexOf","trident","edge","moz","chr","saf","root","getElementsByTagName","orientation","classList","add","defaultSettings","osc1__gain","osc1__detune","osc1__wavetype","osc1__offset","osc2__gain","osc2__detune","osc2__wavetype","osc2__offset","osc3__gain","osc3__detune","osc3__wavetype","osc3__offset","filter__freq","filter__qual","lfo__amount","lfo__freq","lfo__wavetype","delay__gain","delay__time","delay__feedback","delay__cutoff","modulation","lfo__out-1","lfo__out-3","vca__out-2","midi","visualization","List","items","querySelectorAll","updateDOM","item","addEventListener","selectedValue","wavetype","remove","Input","buttonInc","querySelector","buttonDec","inputDOM","getAttribute","Options","defaultParams","container","toggleButton","getElementsByClassName","toggle","optionsDOM","el","status","params","option","console","log","ControlItem","controlsDescription","changeStoreParam","ctrl","controlsItems","knobSize","small","medium","big","huge","controlItems","modulationPorts","pos","x","y","Wires","wires","canvas","drawCircle","R","opacity","ctx","getContext","beginPath","arc","PI","lineWidth","strokeStyle","globalAlpha","stroke","drawCurve","startPoint","endPoint","moveTo","controlPoint","quadraticCurveTo","lineCap","loopID","bodyDOM","mousePos","startPort","endPort","drawPorts","portOpacity","drawWires","find","detectPort","detectedPort","checkPort","event","offsetX","offsetY","redraw","portInUse","endDraw","cancelAnimationFrame","loopRedraw","clearRect","requestAnimationFrame","Visual","WIDTH","HEIGHT","sliceWidth","sliceHeight","CENTER","getViewportSize","innerWidth","innerHeight","round","bufferLength","circleRadius","circleAngle","analyser","frequencyBinCount","newCircleParams","startAngle","endAngle","drawArcs","frequencyData","timeDomainData","lineTo","drawBars","render","getByteFrequencyData","getByteTimeDomainData","requestAnimID","createAnalyser","fftSize","maxDecibels","Uint8Array","notes","Synth","overallGain","destination","webkitAudioContext","sAudioContext","AudioContext","resumeAudio","state","resume","then","e","alert","store","controls","changeParam","subscribe","newVCO","forEach","synth"],"mappings":"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","file":"js/app.a4d9aec0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\nexport default class Store {\n\tconstructor(settings) {\n\n\t\tthis.settings = settings;\n\n\t\t// only settings structure\n\t\tthis.subscribers = {};\n\n\t}\n\n\tsubscribe = (paramName, callback) => {\n\n\t\tif (this.subscribers[paramName]) {\n\t\t\tlet callbacks = this.subscribers[paramName];\n\n\t\t\tthis.subscribers[paramName] = callbacks ?\n\t\t\t\t[...callbacks, callback]\n\t\t\t\t:\n\t\t\t\t[callback];\n\t\t} else {\n\t\t\tthis.subscribers[paramName] = [callback];\n\t\t};\n\n\t\t// drop settings to new subscriber\n\t\tthis.broadcast(paramName);\n\t}\n\n\tbroadcast = (paramName) => {\n\t\tif (this.subscribers[paramName]) {\n\t\t\tthis.subscribers[paramName].map(callback => callback());\n\t\t}\n\t}\n\n\tchangeParam = (paramName, value) => {\n\n\t\tthis.settings[paramName] = value;\n\n\t\tthis.broadcast(paramName);\n\n\t\t// console.log(this.settings);\n\n\t}\n}","\nexport const colors = {\n\tprimary: \t'#768b8E',\n\taccent:\t\t'#A0ffff',\n\tcontrast:\t'#FF6E19'\n};","import $ from 'jquery'\nimport knob from 'jquery-knob';\nimport { colors } from './_colors';\n\n\nexport default class Knob {\n\tconstructor(id, options, defaultValue = 0, callback) {\n\n\t\tthis.id = id || `new-knob-${~~(Math.random()* 100)}`;\n\t\t\n\t\tthis.defaultOptions = {\n\t\t\tmin:\t\t\t1,\n\t\t\tmax:\t\t\t100,\n\t\t\tstep:\t\t\t1,\n\t\t\twidth: \t\t\t'50%',\n\t\t\tbgColor:\t\tcolors.primary,\n\t\t\tfgColor:\t\tcolors.accent,\n\t\t\tthickness: \t\t.2,\n\t\t\tangleOffset: \t-125,\n\t\t\tangleArc:\t\t250,\n\t\t\tdisplayInput:\tfalse,\n\t\t\tfont:\t\t\t'Orbitron',\n\t\t\tfontSize:\t\t10,\n\t\t\tcursor:\t\t\t20,\n\t\t\tchange: \t\tvalue => this.handleChange(value)\n\t\t};\n\t\tthis.options = Object.assign({}, this.defaultOptions, options);\n\t\t\n\t\tthis.callback = callback;\n\n\t\tthis.defaultValue = defaultValue;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\t\t\n\t\tlet input = document.getElementById(this.id);\n\n\t\tif(!input) {\n\t\t\tlet input = document.createElement('input');\n\t\t\tinput.id = this.id;\n\t\t\tinput.value = 1;\n\t\t\tdocument.body.appendChild(input);\n\t\t};\n\n\t\tlet knobID = '#' + this.id;\n\n\t\t$(knobID).knob(this.options);\n\t\t$(knobID).val(this.defaultValue).trigger('change');\n\t}\n\n\thandleChange = (value) => {\n\t\tthis.callback(this.id, value);\n\t}\n};","import Knob from './Knob';\n\n\nexport default class Oscillator {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\n\t\tthis.osc = this.context.createOscillator();\n\t\tthis.osc.start();\n\n\t\tthis.modulated = this.context.createGain();\n\t\tthis.modulated.gain.value = 1;\n\n\t\tthis.volume = this.context.createGain();\n\n\t\tthis.gate = this.context.createGain();\n\t\tthis.gate.gain.value = 0; // note off (muted)\n\n\n\t\tthis.input = this.osc;\n\t\tthis.osc.connect(this.volume);\n\t\tthis.volume.connect(this.modulated);\n\t\tthis.modulated.connect(this.gate);\n\t\tthis.output = this.gate;\n\n\n\t\tthis.detune = 0;\n\t\tthis.offset = 0;\n\n\n\t\tthis.envelope = { // default\n\t\t\tattack: \t.005,\n\t\t\tdecay: \t\t.1,\n\t\t\tsustain: \t.6,\n\t\t\trelease: \t.1\n\t\t};\n\t\tthis.easing = .006; // 6 msec easing\n\t}\n\n\tsetFrequency = freq => {\n\t\tif (isFinite(freq)) {\n\t\t\tthis.osc.frequency.setValueAtTime(freq, this.context.currentTime);\n\t\t};\n\t}\n\n\tsetGain = value => this.volume.gain.value = value;\n\n\tsetWavetype = type => this.osc.type = type;\n\n\tsetDetune = value => {\n\t\tthis.detune = value;\n\t\tthis.osc.detune.setValueAtTime((this.offset + this.detune), this.context.currentTime);\n\t}\n\n\tsetOffset = value => {\n\t\tthis.offset = value * 100;\n\t\tthis.osc.detune.setValueAtTime((this.offset + this.detune), this.context.currentTime);\n\t}\n\n\tsetEnvelope = (paramName, value) => this.envelope[paramName] = value;\t\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n\n\tdisconnect = () => this.output.disconnect();\n\n\tplay = () => {\n\t\tlet now = this.context.currentTime;\n\t\t // shorthand\n\t\tthis.gate.gain.cancelScheduledValues(now);\n\t\tthis.gate.gain.setValueAtTime(0, now + this.easing);\n\t\tthis.gate.gain.linearRampToValueAtTime(1, now + this.envelope.attack + this.easing);\n\t\tthis.gate.gain.linearRampToValueAtTime(\n\t\t\tthis.envelope.sustain,\n\t\t\tnow + this.envelope.attack + this.envelope.decay + this.easing\n\t\t);\n\t}\n\t\t \n\n\tstop = () => {\n\t\tlet now = this.context.currentTime;\n\t\tthis.gate.gain.cancelScheduledValues(now);\n\t\tthis.gate.gain.linearRampToValueAtTime(0, now + this.envelope.release + this.easing);\n\t};\n};","import Oscillator from './Oscillator';\n\n\nexport default class VCO {\n\tconstructor(context, noteBind, outputNode) {\n\n\t\tthis.context = context;\n\t\tthis.noteBind = noteBind;\n\t\tthis.outputNode = outputNode;\n\t\tthis.oscillators = {};\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.oscillators = {\n\t\t\tosc1: new Oscillator(this.context),\n\t\t\tosc2: new Oscillator(this.context),\n\t\t\tosc3: new Oscillator(this.context)\n\t\t};\n\n\t\tthis.connect();\n\t}\n\n\tconnect = () => {\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.oscillators[osc].connect(this.outputNode);\n\t\t};\n\t}\n\n\tdisconnect = () => {\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.oscillators[osc].disconnect();\n\t\t};\n\t}\n\n\tset = (oscName, paramName, value) => {\n\n\t\tswitch (paramName) {\n\t\t\tcase 'frequency':\n\t\t\t\tfor (let osc in this.oscillators) {\n\t\t\t\t\tthis.oscillators[osc].setFrequency(value);\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\tcase 'gain':\n\t\t\t\tthis.oscillators[oscName].setGain(value);\n\t\t\t\tbreak;\n\t\t\tcase 'detune':\n\t\t\t\tthis.oscillators[oscName].setDetune(value);\n\t\t\t\tbreak;\n\t\t\tcase 'wavetype':\n\t\t\t\tthis.oscillators[oscName].setWavetype(value);\n\t\t\t\tbreak;\n\t\t\tcase 'offset':\n\t\t\t\tthis.oscillators[oscName].setOffset(value);\n\t\t\t\tbreak;\n\t\t\tcase 'attack':\n\t\t\tcase 'decay':\n\t\t\tcase 'sustain':\n\t\t\tcase 'release':\n\t\t\t\tthis.oscillators[oscName].setEnvelope(paramName, value);\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tplay = (freq) => {\n\t\tthis.set(null, 'frequency', freq);\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.oscillators[osc].play();\n\t\t};\n\t};\n\n\tstop = () => {\n\t\tfor (let osc in this.oscillators) {\n\t\t\tthis.oscillators[osc].stop();\n\t\t};\n\t}\n}","import Knob from './Knob';\n\n\nexport default class VCF {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\t\tthis.filter = this.context.createBiquadFilter();\n\t\tthis.filter.type = 'lowpass';\n\n\t\tthis.input = this.filter;\n\t\tthis.output = this.filter;\n\n\t\tthis.modulated = this.context.createGain();\n\t\tthis.modulated.gain.value = 6000; // 6 * 100 cents => -6000..6000 (one octave)\n\n\t\tthis.modulated.connect(this.filter.detune);\n\t}\n\n\tset = (paramName, value) => {\n\n\t\tswitch (paramName) {\n\t\t\tcase 'freq':\n\t\t\t\tthis.filter.frequency.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'qual':\n\t\t\t\tthis.filter.Q.value = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n};","\nexport default class LFO {\n\tconstructor(context, modulatedItems) {\n\n\t\tthis.context = context;\n\t\tthis.modulatedItems = modulatedItems;\n\t\tthis.modulatedPorts = [];\n\t\t\n\t\tthis.osc = this.context.createOscillator();\n\t\tthis.osc.start();\n\n\t\tthis.amount = this.context.createGain();\n\n\t\tthis.osc.connect(this.amount);\n\n\t\tthis.output = this.osc.connect(this.amount);\n\t}\n\n\tset = (paramName, value) => {\n\n\t\tswitch (paramName) {\n\t\t\tcase 'amount':\n\t\t\t\tthis.amount.gain.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'freq':\n\t\t\t\tthis.osc.frequency.setValueAtTime(value, this.context.currentTime);\n\t\t\t\tbreak;\n\t\t\tcase 'wavetype':\n\t\t\t\tthis.osc.type = value;\n\t\t\t\tbreak;\n\t\t\tcase 'modulation':\n\t\t\t\tthis.modulate(value);\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\tmodulate = (modulationSettings) => {\n\n\t\tlet newPorts = [];\n\n\t\tObject.keys(modulationSettings).map(key => {\n\n\t\t\tif (key.startsWith('lfo')) { // deal with lfo only\n\n\t\t\t\tlet value = modulationSettings[key];\n\t\t\t\t\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'osc1':\n\t\t\t\t\tcase 'osc2':\n\t\t\t\t\tcase 'osc3':\n\t\t\t\t\t\tlet VCOs = this.modulatedItems['VCOs'];\n\n\t\t\t\t\t\tObject.keys(VCOs).map(key => {\n\t\t\t\t\t\t\tlet port = VCOs[key].oscillators[value].modulated.gain;\n\t\n\t\t\t\t\t\t\tnewPorts.push(port);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'filter':\n\t\t\t\t\t\tlet VCF = this.modulatedItems['VCF'];\n\n\t\t\t\t\t\tlet port = VCF.modulated; // multiplier gain inside\n\n\t\t\t\t\t\tnewPorts.push(port);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t\t// disconnect early ports\n\t\tthis.modulatedPorts.map(port => this.output.disconnect(port));\n\n\t\t// connect new\n\t\tnewPorts.map(port => this.output.connect(port));\n\n\t\tthis.modulatedPorts = newPorts;\n\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n\n\tdisconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.disconnect(node.input);\n\t\t} else {\n\t\t\tthis.output.disconnect(node);\n\t\t};\n\t}\n\n}","\nexport default class VCA {\n\tconstructor(context, modulatedItems) {\n\n\t\tthis.context = context;\n\t\tthis.modulatedItems = modulatedItems;\n\t\tthis.modulatedPorts = [];\n\t\t\n\t\tthis.envelope = {\n\t\t\tattack: \t.005,\n\t\t\tdecay: \t\t.1,\n\t\t\tsustain: \t.6,\n\t\t\trelease: \t.1\n\t\t}\n\t}\n\n\tset = (paramName, value) => {\n\t\tif (paramName === 'modulation') {\n\t\t\tthis.reconnect(value);\n\t\t\treturn;\n\t\t};\n\t\tthis.envelope[paramName] = value;\n\t\tthis.updateValues();\n\t}\n\n\tupdateValues = () => this.modulatedPorts.map(port => port.envelope = this.envelope);\n\n\treconnect = (modulationSettings) => {\n\n\t\tlet newPorts = [];\n\n\t\tObject.keys(modulationSettings).map(key => {\n\n\t\t\tif (key.startsWith('vca')) { // deal with vca only\n\n\t\t\t\tlet value = modulationSettings[key];\n\t\t\t\t\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'osc1':\n\t\t\t\t\tcase 'osc2':\n\t\t\t\t\tcase 'osc3':\n\t\t\t\t\t\tlet VCOs = this.modulatedItems['VCOs'];\n\n\t\t\t\t\t\tObject.keys(VCOs).map(key => {\n\t\t\t\t\t\t\tlet port = VCOs[key].oscillators[value];\n\t\n\t\t\t\t\t\t\tnewPorts.push(port);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'filter':\n\t\t\t\t\t\tdelete(modulationSettings[key]); // for now\n\t\t\t\t\t\tbreak;\n\t\t\t\t};\n\n\t\t\t\tconst defaultEnvelope = { // default\n\t\t\t\t\tattack: \t0,\n\t\t\t\t\tdecay: \t\t0,\n\t\t\t\t\tsustain: \t1,\n\t\t\t\t\trelease: \t0\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.modulatedPorts.map(port => port.envelope = defaultEnvelope);\n\n\t\t\t\tthis.modulatedPorts = newPorts;\n\t\t\t\tthis.updateValues();\n\t\t\t}\n\t\t});\n\t}\n}","\nexport default class Delay {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\t\tthis.delay = this.context.createDelay(15.0);\n\t\tthis.feedback = this.context.createGain();\n\t\tthis.filter = this.context.createBiquadFilter();\n\t\tthis.filter.type = 'lowpass';\n\t\tthis.filter.Q.value = 5;\n\n\t\tthis.volume = this.context.createGain();\n\n\t\tthis.input = this.delay;\n\t\tthis.delay.connect(this.feedback);\n\t\tthis.feedback.connect(this.filter);\n\t\tthis.filter.connect(this.delay);\n\t\tthis.delay.connect(this.volume);\n\t\tthis.output = this.volume;\n\t}\n\n\tset = (paramName, value) => {\n\t\tswitch (paramName) {\n\t\t\tcase 'gain':\n\t\t\t\tthis.volume.gain.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'time':\n\t\t\t\tthis.delay.delayTime.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'feedback':\n\t\t\t\tthis.feedback.gain.value = value;\n\t\t\t\tbreak;\n\t\t\tcase 'cutoff':\n\t\t\t\tthis.filter.frequency.value = value;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n}","import { colors } from './_colors';\n\nimport QwertyHancock from 'qwerty-hancock';\n\n\nexport default class Keyboard {\n\tconstructor(options, keyDownCallback, keyUpCallback) {\n\n\t\tthis.defaultOptions = {\n\t\t\tid: 'keyboard',\n\t\t\twidth: 664,\n\t\t\theight: 72,\n\t\t\tstartNote: 'C3',\n\t\t\toctaves: 2,\n\t\t\twhiteKeyColour: 'rgba(38, 39, 47, 0.85)',\n\t\t\tblackKeyColour: '#A0FFFF',\n\t\t\tborderColour: '#A0FFFF',\n\t\t\tactiveColour: '#FF6E19',\n\t\t};\n\n\t\tthis.options = Object.assign({}, this.defaultOptions, options);\n\n\t\tthis.keyDownCallback = keyDownCallback;\n\t\tthis.keyUpCallback = keyUpCallback;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\t\tthis.keyboard = new QwertyHancock(this.options);\n\n\t\tthis.keyboard.keyDown = (note, freq) => this.handleKeyDown(note, freq);\n\t\tthis.keyboard.keyUp = (note, freq) => this.handleKeyUp(note, freq);\n\t}\n\n\thandleKeyDown = (note, freq) => {\n\t\tthis.keyDownCallback(note, freq);\n\t}\n\t\n\thandleKeyUp = (note, freq) => {\n\t\tthis.keyUpCallback(note, freq);\n\t}\n\n\tset = (paramName, value) => {\n\t\tif (value) {\n\t\t\tthis.keyboard.keyDown = (note, freq) => this.handleKeyDown(note, freq);\n\t\t\tthis.keyboard.keyUp = (note, freq) => this.handleKeyUp(note, freq);\n\n\t\t\tdocument.getElementById('keyboard').dataset['enabled'] = true;\n\t\t\treturn;\n\t\t};\n\t\tthis.keyboard.keyDown = (note, freq) => {};\n\t\tthis.keyboard.keyUp = (note, freq) => {};\n\n\t\tdocument.getElementById('keyboard').dataset['enabled'] = false;\n\t}\n}","\nconst getRandom = (min = 0, max = 1) => (Math.random() * (max - min)) + min;\n\n\nconst convertColor = (color) => {\n\treturn {\n\t\ttoDec: () => {\n\t\t\tif ( color.startsWith('#') ) color = color.slice(1);\n\n\t\t\treturn [\n\t\t\t\tparseInt(color.slice(0, 2), 16),\n\t\t\t\tparseInt(color.slice(2, 4), 16),\n\t\t\t\tparseInt(color.slice(4), 16),\n\t\t\t];\n\t\t},\n\t\ttoHex: () => {\n\t\t\treturn (\n\t\t\t\t'#' +\n\t\t\t\tcolor[0].toString(16) + \n\t\t\t\tcolor[1].toString(16) + \n\t\t\t\tcolor[2].toString(16)\n\t\t\t);\n\t\t}\n\t};\n};\n\nlet VENDOR = 'unknown';\n\n(() => {\n\tlet ua\t\t= window.navigator.userAgent.toLowerCase();\n\tlet msie\t= ua.indexOf('msie');\n\tlet trident\t= ua.indexOf('trident');\n\tlet edge\t= ua.indexOf('edge');\n\tlet moz\t\t= ua.indexOf('firefox');\n\tlet chr\t\t= ua.indexOf('chrome');\n\tlet saf\t\t= ua.indexOf('safari');\n\tlet root\t= document.getElementsByTagName('html')[0];\n\n\n\tif (typeof window.orientation !== 'undefined') root.classList.add('mobile-device');\n\n\n\tif (msie > 0 || trident > 0 || edge > 0) {\n\t\tVENDOR = 'any-ie';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else if (moz > 0) {\n\t\tVENDOR = 'any-firefox';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else if (chr > 0) {\n\t\tVENDOR = 'any-chrome';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else if (saf > 0) {\n\t\tVENDOR = 'any-safari';\n\t\troot.classList.add(VENDOR);\n\t\treturn true;\n\n\t} else {\n\t\treturn false;\n\t}\n\n})();\n\n\n\nexport {\n\tgetRandom,\n\tconvertColor,\n\tVENDOR\n};","import { VENDOR } from './_helpers';\n\n\nlet defaultSettings = {\n\t// VCO\n\t'osc1__gain': \t0,\n\t'osc1__detune': 0,\n\t'osc1__wavetype': 'sine',\n\t'osc1__offset':\t0,\n\n\t'osc2__gain': \t.95,\n\t'osc2__detune': 0,\n\t'osc2__wavetype': 'sawtooth',\n\t'osc2__offset':\t0,\n\n\t'osc3__gain': \t0,\n\t'osc3__detune': 0,\n\t'osc3__wavetype': 'square',\n\t'osc3__offset':\t0,\n\n\t// VCF\n\t'filter__freq': 3500,\n\t'filter__qual': 4,\n\n\t// LFO\n\t'lfo__amount': .15,\n\t'lfo__freq': 2,\n\t'lfo__wavetype': 'sine',\n\n\t// VCA\n\t'attack': \t.05,\n\t'decay': \t.1,\n\t'sustain': \t.6,\n\t'release': \t.1,\n\n\t// Delay\n\t'delay__gain':\t\t.2,\n\t'delay__time': \t\t.3,\n\t'delay__feedback': \t.1,\n\t'delay__cutoff': \t1000,\n\n\t// Modulation\n\tmodulation: {\n\t\t'lfo__out-1': 'osc2',\n\t\t'lfo__out-3': 'filter',\n\t\t'vca__out-2': 'osc1'\n\t},\n\n\toptions: {\n\t\tmidi: false,\n\t\tkeyboard: true,\n\t\tvisualization: (VENDOR === 'any-chrome')\n\t}\n\n};\n\n\nexport { defaultSettings };","\nexport default class List {\n\tconstructor(id, defaultValue = 'sine', callback) {\n\n\t\tthis.id = id;\n\t\tthis.defaultValue = defaultValue;\n\t\tthis.callback = callback;\n\n\t\tthis.items = [];\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.items = [...document.querySelectorAll(`#${this.id} li`)];\n\t\tthis.updateDOM(this.defaultValue); // add class to list item\n\n\t\tthis.items.map(item => {\n\t\t\titem.addEventListener('click', () => {\n\t\t\t\tlet selectedValue = item.dataset.wavetype; // selected wavetype\n\n\t\t\t\tthis.callback(this.id, selectedValue);\n\n\t\t\t\tthis.updateDOM(selectedValue);\n\t\t\t});\n\t\t});\n\t}\n\n\tupdateDOM = value => {\n\t\tthis.items.map(item => {\n\t\t\tif (item.dataset.wavetype === value) {\n\t\t\t\titem.classList.add('selected');\n\t\t\t} else {\n\t\t\t\titem.classList.remove('selected');\n\t\t\t}\n\t\t});\n\t}\n}","\nexport default class Input {\n\tconstructor(id, defaultValue = 0, callback) {\n\n\t\tthis.id = id;\n\t\tthis.value = defaultValue;\n\t\tthis.callback = callback;\n\n\t\tthis.inputDOM = document.querySelector(`#${this.id} input`);\n\n\n\t\tthis.min = this.inputDOM.getAttribute('min') || -12;\n\t\tthis.max = this.inputDOM.getAttribute('max') || 12;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.buttonInc = document.querySelector(`#${this.id} .step-up`);\n\t\tthis.buttonDec = document.querySelector(`#${this.id} .step-down`);\n\n\t\t\n\t\tthis.buttonInc.addEventListener('click', () => {\n\t\t\t\n\t\t\tif (this.value < this.max) {\n\t\t\t\t++this.value;\n\n\t\t\t\tthis.updateDOM();\n\t\t\t};\n\n\t\t});\n\n\t\tthis.buttonDec.addEventListener('click', () => {\n\t\t\t\n\t\t\tif (this.value > this.min) {\n\n\t\t\t\t--this.value;\n\n\t\t\t\tthis.updateDOM();\n\t\t\t};\n\n\t\t});\n\t}\n\n\tupdateDOM = value => {\n\n\t\tthis.callback(this.id, this.value);\n\t\t\n\t\tthis.inputDOM.value = this.value;\n\n\t};\n}","import Store from './Store';\n\nexport default class Options {\n\tconstructor(id, defaultParams, callback) {\n\n\t\tthis.id = id;\n\t\tthis.params = defaultParams;\n\t\tthis.callback = callback;\n\n\t\tthis.optionsDOM = [];\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\t\t\n\t\tthis.container = document.getElementById(this.id);\n\t\tthis.toggleButton = this.container.getElementsByClassName('toggle-options')[0];\n\n\t\t// show/hide options list\n\t\tthis.toggleButton.addEventListener('click', () => {\n\t\t\tthis.container.classList.toggle('visible');\n\t\t});\n\n\t\t// options click events\n\t\tthis.optionsDOM = this.container.getElementsByTagName('li');\n\n\t\t[...this.optionsDOM].map(el => {\n\n\t\t\t// toggle initial params\n\t\t\tel.dataset.status = (this.params[el.dataset.option] ? 'on' : 'off')\n\n\t\t\tel.addEventListener('click', () => {\n\t\t\t\tthis.params[el.dataset.option] = !this.params[el.dataset.option];\n\n\t\t\t\tthis.callback(this.id, this.params);\n\n\t\t\t\tthis.updateDOM();\n\t\t\t});\n\t\t});\n\n\t}\n\n\tupdateDOM = () => {\n\t\tconsole.log(this.params);\n\n\t\t[...this.optionsDOM].map(el => {\n\t\t\tel.dataset.status = (this.params[el.dataset.option] ? 'on' : 'off');\n\t\t});\n\t}\n}","import { defaultSettings as settings } from './_paramSettings';\n\nimport Knob from './Knob';\nimport List from './List';\nimport Input from './Input';\nimport Options from './Options';\n\n\nexport default class ControlItem {\n\tconstructor(controlsDescription, changeStoreParam) {\n\n\t\tthis.controlsDescription = controlsDescription;\n\t\tthis.changeStoreParam = changeStoreParam;\n\n\t\tthis.controlsItems = [];\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tlet ctrl = this.controlsDescription;\n\n\t\tswitch (ctrl.type) {\n\t\t\tcase 'knob':\n\t\t\t\tthis.controlsItems.push(new Knob(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tctrl.options,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t\t\tbreak;\n\t\t\tcase 'list':\n\t\t\t\tthis.controlsItems.push(new List(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t\t\tbreak;\n\t\t\tcase 'input':\n\t\t\t\tthis.controlsItems.push(new Input(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t\t\tbreak;\n\t\t\tcase 'options':\n\t\t\t\tthis.controlsItems.push(new Options(\n\t\t\t\t\tctrl.id,\n\t\t\t\t\tsettings[ctrl.id],\n\t\t\t\t\tthis.changeStoreParam\n\t\t\t\t));\n\t\t};\n\n\t}\n}","\nconst knobSize = {\n\tsmall: 40,\n\tmedium: 60,\n\tbig: 90,\n\thuge: 110\n};\n\n\nconst controlItems = [\n\t// VCO\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc1__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc1__detune',\n\t\toptions: {\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tmin: -100,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tthickness: .3\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'osc1__wavetype'\n\t},\n\t{\n\t\ttype: 'input',\n\t\tid: 'osc1__offset'\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc2__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t},\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc2__detune',\n\t\toptions: {\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tmin: -100,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tthickness: .3\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'osc2__wavetype'\n\t},\n\t{\n\t\ttype: 'input',\n\t\tid: 'osc2__offset'\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc3__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'osc3__detune',\n\t\toptions: {\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tmin: -100,\n\t\t\tmax: 100,\n\t\t\tstep: 1,\n\t\t\tthickness: .3\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'osc3__wavetype'\n\t},\n\t{\n\t\ttype: 'input',\n\t\tid: 'osc3__offset'\n\t},\n\n\t// VCF\n\t{\n\t\ttype: 'knob',\n\t\tid: 'filter__freq',\n\t\toptions: {\n\t\t\tmin: 32,\n\t\t\tmax: 7902,\n\t\t\twidth: knobSize.big,\n\t\t\theight: knobSize.big,\n\t\t\tdisplayInput: true\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'filter__qual',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 10,\n\t\t\tstep: .1,\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small,\n\t\t\tthickness: .3,\n\t\t}\n\t},\n\n\t// LFO\n\t{\n\t\ttype: 'knob',\n\t\tid: 'lfo__amount',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'lfo__freq',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 20,\n\t\t\tstep: .05,\n\t\t\twidth: knobSize.big,\n\t\t\theight: knobSize.big,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'list',\n\t\tid: 'lfo__wavetype'\n\t},\n\n\t// VCA (ADSR)\n\t{\n\t\ttype: 'knob',\n\t\tid: 'attack',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 4,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'decay',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 4,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'sustain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'release',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 8,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\n\t// Delay\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__gain',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 1,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__time',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: 5,\n\t\t\tstep: .01,\n\t\t\twidth: knobSize.big,\n\t\t\theight: knobSize.big,\n\t\t\t// displayInput: true,\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__feedback',\n\t\toptions: {\n\t\t\tmin: 0,\n\t\t\tmax: .9,\n\t\t\tstep: .01,\n\t\t\tthickness: .3,\n\t\t\twidth: knobSize.small,\n\t\t\theight: knobSize.small\n\t\t}\n\t},\n\t{\n\t\ttype: 'knob',\n\t\tid: 'delay__cutoff',\n\t\toptions: {\n\t\t\tmin: 30,\n\t\t\tmax: 6000,\n\t\t\tstep: 1,\n\t\t\twidth: knobSize.medium,\n\t\t\theight: knobSize.medium,\n\t\t\tdisplayInput: true,\n\t\t}\n\t},\n\n\t{\n\t\ttype: 'options',\n\t\tid: 'options'\n\t}\n];\n\n\nconst modulationPorts = [\n\t// osc ports\n\t{\n\t\tname: 'osc1',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 30,\n\t\t\ty: 330\n\t\t}\n\t},\n\t{\n\t\tname: 'osc2',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 70,\n\t\t\ty: 330\n\t\t}\n\t},\n\t{\n\t\tname: 'osc3',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 110,\n\t\t\ty: 330\n\t\t}\n\t},\n\n\t// filter ports\n\t{\n\t\tname: 'filter',\n\t\ttype: 'in',\n\t\tpos: {\n\t\t\tx: 305,\n\t\t\ty: 150\n\t\t}\n\t},\n\n\t// lfo ports\n\t{\n\t\tname: 'lfo__out-1',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 345,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-2',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 375,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-3',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 405,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-4',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 435,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'lfo__out-5',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 465,\n\t\t\ty: 330,\n\t\t}\n\t},\n\n\t// vca ports\n\t{\n\t\tname: 'vca__out-1',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 510,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-2',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 540,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-3',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 570,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-4',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 600,\n\t\t\ty: 330,\n\t\t}\n\t},\n\t{\n\t\tname: 'vca__out-5',\n\t\ttype: 'out',\n\t\tpos: {\n\t\t\tx: 630,\n\t\t\ty: 330,\n\t\t}\n\t}\n];\n\n\nexport {\n\tcontrolItems,\n\tmodulationPorts\n};","import { colors } from './_colors';\nimport { modulationPorts } from './_interfaceSettings';\nimport { defaultSettings } from './_paramSettings';\n\n\nexport default class Wires {\n\tconstructor(defaultSettings, changeStoreParam) {\n\n\t\tthis.modulationSettings = defaultSettings;\n\t\tthis.changeStoreParam = changeStoreParam;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.wires = [];\n\n\t\tthis.canvas = document.getElementById('wires');\n\n\t\t// drawing functions\n\t\tthis.canvas.drawCircle = (x, y, R = 5, opacity = 1) => {\n\t\t\tconst ctx = this.canvas.getContext('2d');\n\t\t\tctx.beginPath();\n\t\n\t\t\tctx.arc(x, y, R, 0, 2*Math.PI);\n\t\t\tctx.lineWidth = 6;\n\t\t\tctx.strokeStyle = '#111111';\n\t\t\tctx.globalAlpha = opacity;\n\t\t\tctx.stroke();\n\n\t\t\tctx.lineWidth = 5;\n\t\t\tctx.strokeStyle = colors.accent;\n\t\t\tctx.stroke();\n\t\t};\n\n\t\tthis.canvas.drawCurve = (startPoint, endPoint) => {\n\t\t\tconst ctx = this.canvas.getContext('2d');\n\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(startPoint.x, startPoint.y);\n\n\t\t\tlet controlPoint = {\n\t\t\t\tx: (startPoint.x + endPoint.x) / 2,\n\t\t\t\ty: (startPoint.y + endPoint.y),\n\t\t\t};\n\n\t\t\tctx.quadraticCurveTo(controlPoint.x, controlPoint.y, endPoint.x, endPoint.y);\n\t\t\tctx.lineWidth = 6;\n\t\t\tctx.lineCap = 'round';\n\t\t\tctx.strokeStyle = '#111111';\n\t\t\tctx.globalAlpha = 1;\n\t\t\tctx.stroke();\n\n\t\t\tctx.lineWidth = 4;\n\t\t\tctx.strokeStyle = colors.accent;\n\t\t\tctx.stroke();\n\t\t};\n\n\n\t\tconst bodyDOM = document.querySelector('body');\n\t\tlet onDrawingCurve = false; // curve drawing state\n\t\tlet highlightPortType;\t\t// for fading port port with same type\n\t\tlet mousePos \t= {};\n\t\tlet port \t\t= {};\n\t\tlet startPort \t= {}; \n\t\tlet endPort \t= {};\n\n\t\tlet selectedPort = {};\n\t\tlet loopID;\n\n\n\t\t// draw ports\n\t\tconst drawPorts = (startPort) => {\n\n\t\t\tmodulationPorts.map(port => {\n\t\t\t\tlet portOpacity;\n\n\t\t\t\tif (startPort.type) {\n\t\t\t\t\tportOpacity = (startPort.type !== port.type || startPort.name === port.name) ? 1 : .5;\n\t\t\t\t} else {\n\t\t\t\t\tportOpacity = 1;\n\t\t\t\t};\n\n\t\t\t\tthis.canvas.drawCircle(\n\t\t\t\t\tport.pos.x,\n\t\t\t\t\tport.pos.y,\n\t\t\t\t\t4,\n\t\t\t\t\tportOpacity\n\t\t\t\t);\n\t\t\t});\n\t\t};\n\n\t\tconst drawWires = () => {\n\n\t\t\tObject.keys(this.modulationSettings).map(key => {\n\t\t\t\tthis.canvas.drawCurve(\n\t\t\t\t\t(modulationPorts.find(item => item.name === key)).pos,\n\t\t\t\t\t(modulationPorts.find(item => item.name === this.modulationSettings[key])).pos\n\t\t\t\t);\n\t\t\t});\n\n\t\t};\n\n\t\tconst detectPort = (easing = 10) => {\n\t\t\tlet detectedPort;\n\n\t\t\tmodulationPorts.map(port => {\n\t\t\t\tif ( (mousePos.x >= (port.pos.x - easing)) && (mousePos.x <= (port.pos.x + easing)) ) {\n\t\t\t\t\tif ( (mousePos.y >= (port.pos.y - easing)) && (mousePos.y <= (port.pos.y + easing)) ) {\n\t\t\t\t\t\tdetectedPort = port;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\t\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn detectedPort;\n\t\t};\n\n\t\tconst checkPort = (port) => {\n\t\t\tlet keys = Object.keys(this.modulationSettings);\n\t\t\tswitch (port.type) {\n\t\t\t\tcase 'out':\n\t\t\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\t\t\tif (keys[i] === port.name) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t[keys[i]]: this.modulationSettings[keys[i]]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'in':\n\t\t\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\t\t\tif (this.modulationSettings[keys[i]] === port.name) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t[keys[i]]: this.modulationSettings[keys[i]]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\t// mouse events\n\t\tthis.canvas.addEventListener('mousemove', event => {\n\t\t\tmousePos.x = event.offsetX;\n\t\t\tmousePos.y = event.offsetY;\n\t\t});\t\n\n\t\tthis.canvas.addEventListener('mousedown', event => {\n\t\t\t\n\t\t\tport = detectPort();\n\n\t\t\tif (port) { // if this is a port, not random place on canvas\n\t\t\t\tredraw(true);\n\t\t\t\tbodyDOM.classList.add('on-wires-drawing');\n\t\t\t\tstartPort = {};\n\t\t\t\tendPort   = {}; // clear previous\n\n\t\t\t\tlet portInUse = checkPort(port);\n\n\t\t\t\tif (portInUse) {\n\n\t\t\t\t\tlet key = Object.keys(portInUse)[0];\n\n\t\t\t\t\tswitch (port.type) {\n\t\t\t\t\t\tcase 'in':\n\t\t\t\t\t\t\tstartPort = modulationPorts.find(item => item.name === key);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'out':\n\t\t\t\t\t\t\tstartPort = modulationPorts.find(item => item.name === portInUse[key]);\n\t\t\t\t\t};\n\n\t\t\t\t\tdelete this.modulationSettings[key]; // delete that connection\n\t\t\t\t\tthis.changeStoreParam('modulation', this.modulationSettings); // update in store\n\n\t\t\t\t} else {\n\t\t\t\t\tstartPort = modulationPorts.find(item => item.name === port.name);\n\t\t\t\t}\n\n\t\t\t};\n\t\t});\n\n\t\tthis.canvas.addEventListener('mouseup', event => {\n\n\t\t\tport = detectPort();\n\n\t\t\tif (port) {\n\n\t\t\t\tif (checkPort(port)) {\n\t\t\t\t\tendDraw();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\n\t\t\t\tendPort = modulationPorts.find(item => item.name === port.name)\n\n\t\t\t\t// add new wire\n\t\t\t\tif ( (startPort.pos && endPort.pos) && (startPort.type !== endPort.type) ) {\n\t\n\t\t\t\t\tswitch (startPort.type) { // sort to { out: in }\n\t\t\t\t\t\tcase 'out':\n\t\t\t\t\t\t\tthis.modulationSettings[startPort.name] = endPort.name;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'in':\n\t\t\t\t\t\t\tthis.modulationSettings[endPort.name] = startPort.name;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.changeStoreParam('modulation', this.modulationSettings); // update store\n\n\t\t\t\t};\n\n\t\t\t};\n\n\t\t\tendDraw();\n\t\t});\n\n\n\t\tconst endDraw = () => {\n\t\t\tonDrawingCurve = false;\n\t\n\t\t\tbodyDOM.classList.remove('on-wires-drawing');\n\t\t\tport = {};\n\t\t\tstartPort = {};\n\t\t\tendPort = {};\n\t\n\t\t\twindow.cancelAnimationFrame(loopID);\n\t\t\tredraw(false); // call once\n\t\t};\n\n\t\tconst redraw = (loopRedraw = false) => {\n\n\t\t\tconst ctx = this.canvas.getContext('2d');\n\n\t\t\t// clear previous drawings\n\t\t\tctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\t\tdrawPorts(startPort);\n\t\t\tdrawWires();\n\n\t\t\tif (loopRedraw) {\n\t\t\t\t// draw new wire\n\t\t\t\tthis.canvas.drawCurve(\n\t\t\t\t\tstartPort.pos ? startPort.pos : mousePos,\n\t\t\t\t\tendPort.pos   ?  endPort.pos  : mousePos\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tloopID = window.requestAnimationFrame(redraw);\n\t\t\t}\n\t\t};\n\t\tredraw(); // call for first draw\n\t\t\n\n\t}\n}","import { colors } from './_colors';\nimport { getRandom, convertColor } from './_helpers';\nimport { defaultSettings as settings } from './_paramSettings';\n\n\nexport default class Visual {\n\tconstructor(context) {\n\n\t\tthis.context = context;\n\n\t\tthis.analyser = this.context.createAnalyser();\n\t\tthis.analyser.fftSize = 512;\n\t\tthis.analyser.maxDecibels = 0;\n\t\tthis.bufferLength = this.analyser.frequencyBinCount;\n\n\t\tthis.frequencyData = new Uint8Array(this.bufferLength);\n\t\tthis.timeDomainData = new Uint8Array(this.bufferLength)\n\n\t\tthis.input = this.analyser;\n\t\tthis.output = this.analyser;\n\n\t\tthis.init();\n\t}\n\n\tinit = () => {\n\n\t\tthis.canvas = document.getElementById('visual');\n\n\t\tconst ctx = this.canvas.getContext('2d');\n\n\t\tlet WIDTH\n\t\tlet HEIGHT\n\t\tlet CENTER = {}\n\n\t\tlet sliceWidth\n\t\tlet sliceHeight\n\t\tlet offsetY\n\n\t\tconst getViewportSize = () => {\n\t\t\tWIDTH = window.innerWidth\n\t\t\tHEIGHT = window.innerHeight\n\t\t\tCENTER = {\n\t\t\t\tx: WIDTH / 2,\n\t\t\t\ty: HEIGHT / 2,\n\t\t\t}\n\n\t\t\tthis.canvas.width = WIDTH\n\t\t\tthis.canvas.height = HEIGHT\n\n\t\t\tsliceWidth = Math.round(WIDTH / this.bufferLength)\n\t\t\tsliceHeight = Math.round(HEIGHT / 8)\n\t\t\toffsetY = CENTER.y - sliceHeight / 2\n\t\t};\n\t\tgetViewportSize()\n\n\t\tthis.colors = {\n\t\t\taccent: convertColor(colors.accent).toDec(),\n\t\t\tcontrast: convertColor(colors.contrast).toDec(),\n\t\t}\n\n\t\twindow.addEventListener('resize', () => getViewportSize())\n\n\n\t\tconst circleRadius = (HEIGHT)\n\n\t\t// create arcs angles\n\t\tlet circleAngle = []\n\n\t\tfor (let i = 0; i <= this.analyser.frequencyBinCount; i++) {\n\t\t\tlet newCircleParams = {\n\t\t\t\tstartAngle: getRandom(-2 * Math.PI, 2 * Math.PI),\n\t\t\t\tendAngle: getRandom(-2 * Math.PI, 2 * Math.PI),\n\t\t\t}\n\t\t\tcircleAngle.push(newCircleParams)\n\t\t}\n\n\n\t\t// draw functions\n\t\tconst drawArcs = () => {\n\n\t\t\t// create many arcs\n\t\t\tfor (let i = 0; i < this.bufferLength; i++) {\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.arc(\n\t\t\t\t\tWIDTH,\n\t\t\t\t\tCENTER.y,\n\t\t\t\t\t~~(circleRadius * (this.frequencyData[i] / 255)),\n\t\t\t\t\tcircleAngle[i].startAngle,\n\t\t\t\t\tcircleAngle[i].endAngle\n\t\t\t\t);\n\t\t\t\tctx.lineWidth = 1;\n\t\t\t\tctx.strokeStyle = `rgba(${this.colors.contrast}, \n\t\t\t\t\t\t\t\t\t\t${this.frequencyData[i] / 255})`;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tctx.stroke();\n\n\t\t\t};\n\n\t\t};\n\n\n\t\tlet x\n\t\tlet y\n\n\t\tconst drawCurve = () => {\n\n\t\t\tctx.beginPath()\n\n\t\t\tx = 0\n\t\t\ty = 0\n\n\t\t\tctx.lineWidth = 1\n\t\t\tctx.strokeStyle = `${colors.accent}`\n\n\t\t\tctx.moveTo(0, CENTER.y)\n\n\t\t\tfor (let i = 0; i < this.bufferLength; i++) {\n\n\t\t\t\ty = (sliceHeight * (this.timeDomainData[i] / 255) + offsetY)\n\n\t\t\t\tctx.lineTo(x, y)\n\n\t\t\t\tx += sliceWidth\n\t\t\t}\n\n\t\t\tctx.moveTo(WIDTH, CENTER.y)\n\t\t\tctx.stroke()\n\t\t\t\n\t\t}\n\n\n\t\tconst drawBars = () => {\n\n\t\t\t// direction\n\t\t\tlet m = 1;\n\n\t\t\tfor (let i = 0; i < this.bufferLength; i++) {\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(WIDTH, (i * m) + CENTER.y);\n\n\t\t\t\tctx.lineTo(\n\t\t\t\t\tWIDTH - this.frequencyData[i],\n\t\t\t\t\t(i * m) + CENTER.y\n\t\t\t\t);\n\n\t\t\t\tctx.strokeStyle = `rgba(${this.colors.accent},\n\t\t\t\t\t\t\t\t\t\t${this.frequencyData[i] / 255})`;\n\t\t\t\tctx.stroke();\n\n\t\t\t\t// change direction\n\t\t\t\tm *= -1;\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = () => {\n\n\t\t\t// clear previous drawings\n\t\t\tctx.clearRect(0, 0, WIDTH, HEIGHT);\n\n\t\t\tthis.analyser.getByteFrequencyData(this.frequencyData);\n\t\t\tthis.analyser.getByteTimeDomainData(this.timeDomainData);\n\n\t\t\tdrawArcs();\n\t\t\tdrawCurve();\n\t\t\tdrawBars();\n\n\t\t\tthis.requestAnimID = requestAnimationFrame(this.render);\n\t\t}\n\n\t}\n\n\tset = (paramName, value) => {\n\t\tif (value) {\n\t\t\tthis.render();\n\t\t\tdocument.getElementById('visual').dataset['visible'] = true;\n\t\t\treturn;\n\t\t};\n\t\tcancelAnimationFrame(this.requestAnimID);\n\t\tdocument.getElementById('visual').dataset['visible'] = false;\n\t}\n\n\tconnect = node => {\n\t\tif (node.hasOwnProperty('input')) {\n\t\t\tthis.output.connect(node.input);\n\t\t} else {\n\t\t\tthis.output.connect(node);\n\t\t};\n\t}\n}","\nexport const notes = ['C3', 'C#3', 'D3', 'D#3', 'E3', 'F3', 'F#3', 'G3', 'G#3', 'A3', 'A#3', 'B3', \n\t\t\t\t\t  'C4', 'C#4', 'D4', 'D#4', 'E4', 'F4', 'F#4', 'G4', 'G#3', 'A4', 'A#4', 'B4'];","import { AudioContext as sAudioContext } from 'standardized-audio-context';\n\nimport Store from './Store';\nimport VCO from './VCO';\nimport VCF from './VCF';\nimport LFO from './LFO';\nimport VCA from './VCA';\nimport Delay from './Delay';\nimport Keyboard from './Keyboard';\nimport ControlItem from './ControlItem';\nimport Wires from './Wires';\nimport Visual from './Visual';\n\nimport { controlItems } from './_interfaceSettings';\nimport { defaultSettings as settings } from './_paramSettings';\nimport { notes } from './_notes';\n\n\nexport default class Synth {\n\tconstructor() {\n\n\t\ttry {\n\t\t\tthis.context = window.webkitAudioContext\n\t\t\t\t? new sAudioContext()\n\t\t\t\t: new AudioContext()\n\n\t\t\tlet resumeAudio = () => {\n\t\t\t\tif (this.context.state !== 'suspended') return\n\n\t\t\t\tthis.context.resume().then(() => {\n\t\t\t\t\tconsole.log('Playback resumed successfully')\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tdocument.body.addEventListener('mousedown', resumeAudio)\n\t\t\tdocument.body.addEventListener('keydown', resumeAudio)\n\t\t}\n\t\tcatch (e) {\n\t\t\talert('Web Audio API is not supported in this browser');\n\t\t\treturn;\n\t\t};\n\n\t\tthis.store = new Store(settings);\n\n\n\t\t// creating controls\n\t\tthis.controls = [];\n\n\t\tcontrolItems.map(item => {\n\t\t\tthis.controls.push(\n\t\t\t\tnew ControlItem(\n\t\t\t\t\titem,\n\t\t\t\t\tthis.store.changeParam,\n\t\t\t\t\tthis.store.subscribe // for wavetype list select highlighting\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\n\n\t\t// creating filter \n\t\tthis.VCF = new VCF(this.context);\n\t\t['freq', 'qual'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`filter__${paramName}`,\n\t\t\t\t() => this.VCF.set(paramName, this.store.settings[`filter__${paramName}`])\n\t\t\t)\n\t\t});\n\n\n\t\tthis.VCOs = {};\n\t\tnotes.map(note => {\n\n\t\t\tlet newVCO = new VCO(this.context, note, this.VCF);\n\t\t\t\n\t\t\t// creating osclillators for every key(note)\n\t\t\t// and binding it with settings store\n\t\t\tObject.keys(newVCO.oscillators).forEach(oscName => {\n\t\t\t\t['gain', 'detune', 'wavetype', 'offset'].forEach(paramName => {\n\t\t\t\t\tthis.store.subscribe(\n\t\t\t\t\t\t`${oscName}__${paramName}`,\n\t\t\t\t\t\t() => newVCO.set(\n\t\t\t\t\t\t\toscName,\n\t\t\t\t\t\t\tparamName,\n\t\t\t\t\t\t\tthis.store.settings[`${oscName}__${paramName}`]\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.VCOs = Object.assign({}, this.VCOs, {\n\t\t\t\t[note]: newVCO\n\t\t\t});\n\t\t});\n\n\t\t// creating keyboard and bindings\n\t\tthis.keyboard = new Keyboard(\n\t\t\t{ id: 'keyboard', startNote: 'C3' },\n\t\n\t\t\t(note, freq) => this.VCOs[note].play(freq), // 'keyPressed' event callback\n\t\t\t\n\t\t\t(note, freq) => this.VCOs[note].stop() // 'keyUp' event callback -> stop oscillators\n\t\t);\n\t\tthis.store.subscribe(\n\t\t\t'options',\n\t\t\t() => this.keyboard.set('enabled', this.store.settings.options.keyboard)\n\t\t);\n\n\n\t\t// creating LFO modulator\n\t\tthis.LFO = new LFO(\n\t\t\tthis.context,\n\t\t\t{ VCOs: this.VCOs, VCF: this.VCF } // objects that will be modulated\n\t\t);\n\t\t['amount', 'freq', 'wavetype'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`lfo__${paramName}`,\n\t\t\t\t() => this.LFO.set(paramName, this.store.settings[`lfo__${paramName}`])\n\t\t\t)\n\t\t});\n\t\t// subscribe LFO for wires connection changes\n\t\tthis.store.subscribe(\n\t\t\t'modulation',\n\t\t\t() => this.LFO.set('modulation', this.store.settings['modulation'])\n\t\t);\n\n\n\t\t// creating VCA (ADSR) modulator\n\t\tthis.VCA = new VCA(\n\t\t\tthis.context,\n\t\t\t{ VCOs: this.VCOs, VCF: this.VCF }\n\t\t);\n\t\t['attack', 'decay', 'sustain', 'release'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`${paramName}`,\n\t\t\t\t() => this.VCA.set(paramName, this.store.settings[`${paramName}`])\n\t\t\t)\n\t\t});\n\t\tthis.store.subscribe(\n\t\t\t'modulation',\n\t\t\t() => this.VCA.set('modulation', this.store.settings['modulation'])\n\t\t);\n\n\n\t\t// creating delay\n\t\tthis.Delay = new Delay(this.context);\n\t\t['gain', 'time', 'feedback', 'cutoff'].map(paramName => {\n\t\t\tthis.store.subscribe(\n\t\t\t\t`delay__${paramName}`,\n\t\t\t\t() => this.Delay.set(paramName, this.store.settings[`delay__${paramName}`])\n\t\t\t)\n\t\t});\n\n\n\t\t// creating wires\n\t\tthis.Wires = new Wires(\n\t\t\tthis.store.settings.modulation, // default params\n\t\t\tthis.store.changeParam\n\t\t);\n\n\n\t\t// creating visualization\n\t\tthis.Visual = new Visual(this.context);\n\t\tthis.store.subscribe(\n\t\t\t'options',\n\t\t\t() => this.Visual.set('visible', this.store.settings.options.visualization)\n\t\t);\n\n\t\n\t\tthis.init();\n\t}\n\n\n\tinit = () => {\n\n\t\tthis.overallGain = this.context.createGain();\n\t\tthis.overallGain.gain.value = .5;\n\n\t\t// connections\n\t\tthis.VCF.connect(this.Delay);\n\t\tthis.VCF.connect(this.overallGain);\n\t\tthis.Delay.connect(this.overallGain);\n\t\tthis.overallGain.connect(this.Visual.input);\n\t\tthis.Visual.connect(this.context.destination);\n\n\t\tdocument.body.classList.add('loaded');\n\t}\n}","import './styles/main.styl'\n\nimport Synth from './modules/Synth'\nimport Wires from './modules/Wires'\n\n\nconst synth = new Synth()\n\nconsole.log(synth)\n"],"sourceRoot":""}