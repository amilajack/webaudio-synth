(function(t){function e(e){for(var i,s,c=e[0],r=e[1],u=e[2],d=0,h=[];d<c.length;d++)s=c[d],a[s]&&h.push(a[s][0]),a[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,c=1;c<n.length;c++){var r=n[c];0!==a[r]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2583:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d"),n("2583"),n("f751"),n("456d"),n("ac6a");var i=n("276c"),a=n("fc11"),o=n("7ad9"),s=n("d0ff"),c=function t(e){var n=this;Object(i["a"])(this,t),Object(a["a"])(this,"subscribe",function(t,e){if(n.subscribers[t]){var i=n.subscribers[t];n.subscribers[t]=i?Object(s["a"])(i).concat([e]):[e]}else n.subscribers[t]=[e];n.broadcast(t)}),Object(a["a"])(this,"broadcast",function(t){n.subscribers[t]&&n.subscribers[t].map(function(t){return t()})}),Object(a["a"])(this,"changeParam",function(t,e){n.settings[t]=e,n.broadcast(t)}),this.settings=e,this.subscribers={}},r=n("1157"),u=n.n(r),l=(n("bda4"),{primary:"#768b8E",accent:"#A0ffff",contrast:"#FF6E19"}),d=function t(e,n){var o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){var t=document.getElementById(o.id);if(!t){var e=document.createElement("input");e.id=o.id,e.value=1,document.body.appendChild(e)}var n="#"+o.id;u()(n).knob(o.options),u()(n).val(o.defaultValue).trigger("change")}),Object(a["a"])(this,"handleChange",function(t){o.callback(o.id,t)}),this.id=e||"new-knob-".concat(~~(100*Math.random())),this.defaultOptions={min:1,max:100,step:1,width:"50%",bgColor:l.primary,fgColor:l.accent,thickness:.2,angleOffset:-125,angleArc:250,displayInput:!1,font:"Orbitron",fontSize:10,cursor:20,change:function(t){return o.handleChange(t)}},this.options=Object.assign({},this.defaultOptions,n),this.callback=c,this.defaultValue=s,this.init()},h=function t(e){var n=this;Object(i["a"])(this,t),Object(a["a"])(this,"setFrequency",function(t){isFinite(t)&&n.osc.frequency.setValueAtTime(t,n.context.currentTime)}),Object(a["a"])(this,"setGain",function(t){return n.volume.gain.value=t}),Object(a["a"])(this,"setWavetype",function(t){return n.osc.type=t}),Object(a["a"])(this,"setDetune",function(t){n.detune=t,n.osc.detune.setValueAtTime(n.offset+n.detune,n.context.currentTime)}),Object(a["a"])(this,"setOffset",function(t){n.offset=100*t,n.osc.detune.setValueAtTime(n.offset+n.detune,n.context.currentTime)}),Object(a["a"])(this,"setEnvelope",function(t,e){return n.envelope[t]=e}),Object(a["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),Object(a["a"])(this,"disconnect",function(){return n.output.disconnect()}),Object(a["a"])(this,"play",function(){var t=n.context.currentTime;n.gate.gain.cancelScheduledValues(t),n.gate.gain.setValueAtTime(0,t+n.easing),n.gate.gain.linearRampToValueAtTime(1,t+n.envelope.attack+n.easing),n.gate.gain.linearRampToValueAtTime(n.envelope.sustain,t+n.envelope.attack+n.envelope.decay+n.easing)}),Object(a["a"])(this,"stop",function(){var t=n.context.currentTime;n.gate.gain.cancelScheduledValues(t),n.gate.gain.linearRampToValueAtTime(0,t+n.envelope.release+n.easing)}),this.context=e,this.osc=this.context.createOscillator(),this.osc.start(),this.modulated=this.context.createGain(),this.modulated.gain.value=1,this.volume=this.context.createGain(),this.gate=this.context.createGain(),this.gate.gain.value=0,this.input=this.osc,this.osc.connect(this.volume),this.volume.connect(this.modulated),this.modulated.connect(this.gate),this.output=this.gate,this.detune=0,this.offset=0,this.envelope={attack:.005,decay:.1,sustain:.6,release:.1},this.easing=.006},f=function t(e,n,o){var s=this;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){s.oscillators={osc1:new h(s.context),osc2:new h(s.context),osc3:new h(s.context)},s.connect()}),Object(a["a"])(this,"connect",function(){for(var t in s.oscillators)s.oscillators[t].connect(s.outputNode)}),Object(a["a"])(this,"disconnect",function(){for(var t in s.oscillators)s.oscillators[t].disconnect()}),Object(a["a"])(this,"set",function(t,e,n){switch(e){case"frequency":for(var i in s.oscillators)s.oscillators[i].setFrequency(n);break;case"gain":s.oscillators[t].setGain(n);break;case"detune":s.oscillators[t].setDetune(n);break;case"wavetype":s.oscillators[t].setWavetype(n);break;case"offset":s.oscillators[t].setOffset(n);break;case"attack":case"decay":case"sustain":case"release":s.oscillators[t].setEnvelope(e,n);break}}),Object(a["a"])(this,"play",function(t){for(var e in s.set(null,"frequency",t),s.oscillators)s.oscillators[e].play()}),Object(a["a"])(this,"stop",function(){for(var t in s.oscillators)s.oscillators[t].stop()}),this.context=e,this.noteBind=n,this.outputNode=o,this.oscillators={},this.init()},p=function t(e){var n=this;Object(i["a"])(this,t),Object(a["a"])(this,"set",function(t,e){switch(t){case"freq":n.filter.frequency.value=e;break;case"qual":n.filter.Q.value=e;break}}),Object(a["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),this.context=e,this.filter=this.context.createBiquadFilter(),this.filter.type="lowpass",this.input=this.filter,this.output=this.filter,this.modulated=this.context.createGain(),this.modulated.gain.value=6e3,this.modulated.connect(this.filter.detune)},m=(n("f559"),function t(e,n){var o=this;Object(i["a"])(this,t),Object(a["a"])(this,"set",function(t,e){switch(t){case"amount":o.amount.gain.value=e;break;case"freq":o.osc.frequency.setValueAtTime(e,o.context.currentTime);break;case"wavetype":o.osc.type=e;break;case"modulation":o.modulate(e);break}}),Object(a["a"])(this,"modulate",function(t){var e=[];Object.keys(t).map(function(n){if(n.startsWith("lfo")){var i=t[n];switch(i){case"osc1":case"osc2":case"osc3":var a=o.modulatedItems["VCOs"];Object.keys(a).map(function(t){var n=a[t].oscillators[i].modulated.gain;e.push(n)});break;case"filter":var s=o.modulatedItems["VCF"],c=s.modulated;e.push(c);break}}}),o.modulatedPorts.map(function(t){return o.output.disconnect(t)}),e.map(function(t){return o.output.connect(t)}),o.modulatedPorts=e}),Object(a["a"])(this,"connect",function(t){t.hasOwnProperty("input")?o.output.connect(t.input):o.output.connect(t)}),Object(a["a"])(this,"disconnect",function(t){t.hasOwnProperty("input")?o.output.disconnect(t.input):o.output.disconnect(t)}),this.context=e,this.modulatedItems=n,this.modulatedPorts=[],this.osc=this.context.createOscillator(),this.osc.start(),this.amount=this.context.createGain(),this.osc.connect(this.amount),this.output=this.osc.connect(this.amount)}),b=function t(e,n){var o=this;Object(i["a"])(this,t),Object(a["a"])(this,"set",function(t,e){"modulation"!==t?(o.envelope[t]=e,o.updateValues()):o.reconnect(e)}),Object(a["a"])(this,"updateValues",function(){return o.modulatedPorts.map(function(t){return t.envelope=o.envelope})}),Object(a["a"])(this,"reconnect",function(t){var e=[];Object.keys(t).map(function(n){if(n.startsWith("vca")){var i=t[n];switch(i){case"osc1":case"osc2":case"osc3":var a=o.modulatedItems["VCOs"];Object.keys(a).map(function(t){var n=a[t].oscillators[i];e.push(n)});break;case"filter":delete t[n];break}var s={attack:0,decay:0,sustain:1,release:0};o.modulatedPorts.map(function(t){return t.envelope=s}),o.modulatedPorts=e,o.updateValues()}})}),this.context=e,this.modulatedItems=n,this.modulatedPorts=[],this.envelope={attack:.005,decay:.1,sustain:.6,release:.1}},y=function t(e){var n=this;Object(i["a"])(this,t),Object(a["a"])(this,"set",function(t,e){switch(t){case"gain":n.volume.gain.value=e;break;case"time":n.delay.delayTime.value=e;break;case"feedback":n.feedback.gain.value=e;break;case"cutoff":n.filter.frequency.value=e;break}}),Object(a["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),this.context=e,this.delay=this.context.createDelay(15),this.feedback=this.context.createGain(),this.filter=this.context.createBiquadFilter(),this.filter.type="lowpass",this.filter.Q.value=5,this.volume=this.context.createGain(),this.input=this.delay,this.delay.connect(this.feedback),this.feedback.connect(this.filter),this.filter.connect(this.delay),this.delay.connect(this.volume),this.output=this.volume},v=n("4f64"),g=n.n(v),k=function t(e,n,o){var s=this;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){s.keyboard=new g.a(s.options),s.keyboard.keyDown=function(t,e){return s.handleKeyDown(t,e)},s.keyboard.keyUp=function(t,e){return s.handleKeyUp(t,e)}}),Object(a["a"])(this,"handleKeyDown",function(t,e){s.keyDownCallback(t,e)}),Object(a["a"])(this,"handleKeyUp",function(t,e){s.keyUpCallback(t,e)}),Object(a["a"])(this,"set",function(t,e){if(e)return s.keyboard.keyDown=function(t,e){return s.handleKeyDown(t,e)},s.keyboard.keyUp=function(t,e){return s.handleKeyUp(t,e)},void(document.getElementById("keyboard").dataset["enabled"]=!0);s.keyboard.keyDown=function(t,e){},s.keyboard.keyUp=function(t,e){},document.getElementById("keyboard").dataset["enabled"]=!1}),this.defaultOptions={id:"keyboard",width:664,height:72,startNote:"C3",octaves:2,whiteKeyColour:"rgba(38, 39, 47, 0.85)",blackKeyColour:"#A0FFFF",borderColour:"#A0FFFF",activeColour:"#FF6E19"},this.options=Object.assign({},this.defaultOptions,e),this.keyDownCallback=n,this.keyUpCallback=o,this.init()},O=(n("6b54"),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(e-t)+t}),w=function(t){return{toDec:function(){return t.startsWith("#")&&(t=t.slice(1)),[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4),16)]},toHex:function(){return"#"+t[0].toString(16)+t[1].toString(16)+t[2].toString(16)}}},_="unknown";(function(){var t=window.navigator.userAgent.toLowerCase(),e=t.indexOf("msie"),n=t.indexOf("trident"),i=t.indexOf("edge"),a=t.indexOf("firefox"),o=t.indexOf("chrome"),s=t.indexOf("safari"),c=document.getElementsByTagName("html")[0];"undefined"!==typeof window.orientation&&c.classList.add("mobile-device"),e>0||n>0||i>0?(_="any-ie",c.classList.add(_)):a>0?(_="any-firefox",c.classList.add(_)):o>0?(_="any-chrome",c.classList.add(_)):s>0&&(_="any-safari",c.classList.add(_))})();var x={osc1__gain:0,osc1__detune:0,osc1__wavetype:"sine",osc1__offset:0,osc2__gain:.95,osc2__detune:0,osc2__wavetype:"sawtooth",osc2__offset:0,osc3__gain:0,osc3__detune:0,osc3__wavetype:"square",osc3__offset:0,filter__freq:3500,filter__qual:4,lfo__amount:.15,lfo__freq:2,lfo__wavetype:"sine",attack:.05,decay:.1,sustain:.6,release:.1,delay__gain:.2,delay__time:.3,delay__feedback:.1,delay__cutoff:1e3,modulation:{"lfo__out-1":"osc2","lfo__out-3":"filter","vca__out-2":"osc1"},options:{midi:!1,keyboard:!0,visualization:"any-chrome"===_}},j=function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sine",c=arguments.length>2?arguments[2]:void 0;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){n.items=Object(s["a"])(document.querySelectorAll("#".concat(n.id," li"))),n.updateDOM(n.defaultValue),n.items.map(function(t){t.addEventListener("click",function(){var e=t.dataset.wavetype;n.callback(n.id,e),n.updateDOM(e)})})}),Object(a["a"])(this,"updateDOM",function(t){n.items.map(function(e){e.dataset.wavetype===t?e.classList.add("selected"):e.classList.remove("selected")})}),this.id=e,this.defaultValue=o,this.callback=c,this.items=[],this.init()},C=function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){n.buttonInc=document.querySelector("#".concat(n.id," .step-up")),n.buttonDec=document.querySelector("#".concat(n.id," .step-down")),n.buttonInc.addEventListener("click",function(){n.value<n.max&&(++n.value,n.updateDOM())}),n.buttonDec.addEventListener("click",function(){n.value>n.min&&(--n.value,n.updateDOM())})}),Object(a["a"])(this,"updateDOM",function(t){n.callback(n.id,n.value),n.inputDOM.value=n.value}),this.id=e,this.value=o,this.callback=s,this.inputDOM=document.querySelector("#".concat(this.id," input")),this.min=this.inputDOM.getAttribute("min")||-12,this.max=this.inputDOM.getAttribute("max")||12,this.init()},D=function t(e,n,o){var c=this;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){c.container=document.getElementById(c.id),c.toggleButton=c.container.getElementsByClassName("toggle-options")[0],c.toggleButton.addEventListener("click",function(){c.container.classList.toggle("visible")}),c.optionsDOM=c.container.getElementsByTagName("li"),Object(s["a"])(c.optionsDOM).map(function(t){t.dataset.status=c.params[t.dataset.option]?"on":"off",t.addEventListener("click",function(){c.params[t.dataset.option]=!c.params[t.dataset.option],c.callback(c.id,c.params),c.updateDOM()})})}),Object(a["a"])(this,"updateDOM",function(){console.log(c.params),Object(s["a"])(c.optionsDOM).map(function(t){t.dataset.status=c.params[t.dataset.option]?"on":"off"})}),this.id=e,this.params=n,this.callback=o,this.optionsDOM=[],this.init()},V=function t(e,n){var o=this;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){var t=o.controlsDescription;switch(t.type){case"knob":o.controlsItems.push(new d(t.id,t.options,x[t.id],o.changeStoreParam));break;case"list":o.controlsItems.push(new j(t.id,x[t.id],o.changeStoreParam));break;case"input":o.controlsItems.push(new C(t.id,x[t.id],o.changeStoreParam));break;case"options":o.controlsItems.push(new D(t.id,x[t.id],o.changeStoreParam))}}),this.controlsDescription=e,this.changeStoreParam=n,this.controlsItems=[],this.init()},S=(n("7514"),n("7f7f"),{small:40,medium:60,big:90,huge:110}),q=[{type:"knob",id:"osc1__gain",options:{min:0,max:1,step:.01,width:S.medium,height:S.medium}},{type:"knob",id:"osc1__detune",options:{width:S.small,height:S.small,min:-100,max:100,step:1,thickness:.3}},{type:"list",id:"osc1__wavetype"},{type:"input",id:"osc1__offset"},{type:"knob",id:"osc2__gain",options:{min:0,max:1,step:.01,width:S.medium,height:S.medium}},{type:"knob",id:"osc2__detune",options:{width:S.small,height:S.small,min:-100,max:100,step:1,thickness:.3}},{type:"list",id:"osc2__wavetype"},{type:"input",id:"osc2__offset"},{type:"knob",id:"osc3__gain",options:{min:0,max:1,step:.01,width:S.medium,height:S.medium}},{type:"knob",id:"osc3__detune",options:{width:S.small,height:S.small,min:-100,max:100,step:1,thickness:.3}},{type:"list",id:"osc3__wavetype"},{type:"input",id:"osc3__offset"},{type:"knob",id:"filter__freq",options:{min:32,max:7902,width:S.big,height:S.big,displayInput:!0}},{type:"knob",id:"filter__qual",options:{min:0,max:10,step:.1,width:S.small,height:S.small,thickness:.3}},{type:"knob",id:"lfo__amount",options:{min:0,max:1,step:.01,width:S.medium,height:S.medium}},{type:"knob",id:"lfo__freq",options:{min:0,max:20,step:.05,width:S.big,height:S.big,displayInput:!0}},{type:"list",id:"lfo__wavetype"},{type:"knob",id:"attack",options:{min:0,max:4,step:.01,width:S.medium,height:S.medium,displayInput:!0}},{type:"knob",id:"decay",options:{min:0,max:4,step:.01,width:S.medium,height:S.medium,displayInput:!0}},{type:"knob",id:"sustain",options:{min:0,max:1,step:.01,width:S.medium,height:S.medium,displayInput:!0}},{type:"knob",id:"release",options:{min:0,max:8,step:.01,width:S.medium,height:S.medium,displayInput:!0}},{type:"knob",id:"delay__gain",options:{min:0,max:1,step:.01,width:S.medium,height:S.medium}},{type:"knob",id:"delay__time",options:{min:0,max:5,step:.01,width:S.big,height:S.big}},{type:"knob",id:"delay__feedback",options:{min:0,max:.9,step:.01,thickness:.3,width:S.small,height:S.small}},{type:"knob",id:"delay__cutoff",options:{min:30,max:6e3,step:1,width:S.medium,height:S.medium,displayInput:!0}},{type:"options",id:"options"}],A=[{name:"osc1",type:"in",pos:{x:30,y:330}},{name:"osc2",type:"in",pos:{x:70,y:330}},{name:"osc3",type:"in",pos:{x:110,y:330}},{name:"filter",type:"in",pos:{x:305,y:150}},{name:"lfo__out-1",type:"out",pos:{x:345,y:330}},{name:"lfo__out-2",type:"out",pos:{x:375,y:330}},{name:"lfo__out-3",type:"out",pos:{x:405,y:330}},{name:"lfo__out-4",type:"out",pos:{x:435,y:330}},{name:"lfo__out-5",type:"out",pos:{x:465,y:330}},{name:"vca__out-1",type:"out",pos:{x:510,y:330}},{name:"vca__out-2",type:"out",pos:{x:540,y:330}},{name:"vca__out-3",type:"out",pos:{x:570,y:330}},{name:"vca__out-4",type:"out",pos:{x:600,y:330}},{name:"vca__out-5",type:"out",pos:{x:630,y:330}}],P=function t(e,n){var o=this;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){o.wires=[],o.canvas=document.getElementById("wires"),o.canvas.drawCircle=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=o.canvas.getContext("2d");a.beginPath(),a.arc(t,e,n,0,2*Math.PI),a.lineWidth=6,a.strokeStyle="#111111",a.globalAlpha=i,a.stroke(),a.lineWidth=5,a.strokeStyle=l.accent,a.stroke()},o.canvas.drawCurve=function(t,e){var n=o.canvas.getContext("2d");n.beginPath(),n.moveTo(t.x,t.y);var i={x:(t.x+e.x)/2,y:t.y+e.y};n.quadraticCurveTo(i.x,i.y,e.x,e.y),n.lineWidth=6,n.lineCap="round",n.strokeStyle="#111111",n.globalAlpha=1,n.stroke(),n.lineWidth=4,n.strokeStyle=l.accent,n.stroke()};var t,e=document.querySelector("body"),n={},i={},s={},c={},r=function(t){A.map(function(e){var n;n=t.type?t.type!==e.type||t.name===e.name?1:.5:1,o.canvas.drawCircle(e.pos.x,e.pos.y,4,n)})},u=function(){Object.keys(o.modulationSettings).map(function(t){o.canvas.drawCurve(A.find(function(e){return e.name===t}).pos,A.find(function(e){return e.name===o.modulationSettings[t]}).pos)})},d=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return A.map(function(i){n.x>=i.pos.x-e&&n.x<=i.pos.x+e&&n.y>=i.pos.y-e&&n.y<=i.pos.y+e&&(t=i)}),t},h=function(t){var e=Object.keys(o.modulationSettings);switch(t.type){case"out":for(var n=0;n<e.length;n++)if(e[n]===t.name)return Object(a["a"])({},e[n],o.modulationSettings[e[n]]);break;case"in":for(var i=0;i<e.length;i++)if(o.modulationSettings[e[i]]===t.name)return Object(a["a"])({},e[i],o.modulationSettings[e[i]]);break}};o.canvas.addEventListener("mousemove",function(t){n.x=t.offsetX,n.y=t.offsetY}),o.canvas.addEventListener("mousedown",function(t){if(i=d(),i){p(!0),e.classList.add("on-wires-drawing"),s={},c={};var n=h(i);if(n){var a=Object.keys(n)[0];switch(i.type){case"in":s=A.find(function(t){return t.name===a});break;case"out":s=A.find(function(t){return t.name===n[a]})}delete o.modulationSettings[a],o.changeStoreParam("modulation",o.modulationSettings)}else s=A.find(function(t){return t.name===i.name})}}),o.canvas.addEventListener("mouseup",function(t){if(i=d(),i){if(h(i))return void f();if(c=A.find(function(t){return t.name===i.name}),s.pos&&c.pos&&s.type!==c.type){switch(s.type){case"out":o.modulationSettings[s.name]=c.name;break;case"in":o.modulationSettings[c.name]=s.name;break}o.changeStoreParam("modulation",o.modulationSettings)}}f()});var f=function(){!1,e.classList.remove("on-wires-drawing"),i={},s={},c={},window.cancelAnimationFrame(t),p(!1)},p=function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=o.canvas.getContext("2d");a.clearRect(0,0,o.canvas.width,o.canvas.height),r(s),u(),i&&(o.canvas.drawCurve(s.pos?s.pos:n,c.pos?c.pos:n),t=window.requestAnimationFrame(e))};p()}),this.modulationSettings=e,this.changeStoreParam=n,this.init()},F=(n("34ef"),function t(e){var n=this;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){n.canvas=document.getElementById("visual");var t,e,i,a,o,s=n.canvas.getContext("2d"),c={},r=function(){t=window.innerWidth,e=window.innerHeight,c={x:t/2,y:e/2},n.canvas.width=t,n.canvas.height=e,i=Math.round(t/n.bufferLength),a=Math.round(e/8),o=c.y-a/2};r(),n.colors={accent:w(l.accent).toDec(),contrast:w(l.contrast).toDec()},window.addEventListener("resize",function(){return r()});for(var u=e,d=[],h=0;h<=n.analyser.frequencyBinCount;h++){var f={startAngle:O(-2*Math.PI,2*Math.PI),endAngle:O(-2*Math.PI,2*Math.PI)};d.push(f)}var p,m,b=function(){for(var e=0;e<n.bufferLength;e++)s.beginPath(),s.arc(t,c.y,~~(u*(n.frequencyData[e]/255)),d[e].startAngle,d[e].endAngle),s.lineWidth=1,s.strokeStyle="rgba(".concat(n.colors.contrast,", \n\t\t\t\t\t\t\t\t\t\t").concat(n.frequencyData[e]/255,")"),s.stroke()},y=function(){s.beginPath(),p=0,m=0,s.lineWidth=1,s.strokeStyle="".concat(l.accent),s.moveTo(0,c.y);for(var e=0;e<n.bufferLength;e++)m=a*(n.timeDomainData[e]/255)+o,s.lineTo(p,m),p+=i;s.moveTo(t,c.y),s.stroke()},v=function(){for(var e=1,i=0;i<n.bufferLength;i++)s.beginPath(),s.moveTo(t,i*e+c.y),s.lineTo(t-n.frequencyData[i],i*e+c.y),s.strokeStyle="rgba(".concat(n.colors.accent,",\n\t\t\t\t\t\t\t\t\t\t").concat(n.frequencyData[i]/255,")"),s.stroke(),e*=-1};n.render=function(){s.clearRect(0,0,t,e),n.analyser.getByteFrequencyData(n.frequencyData),n.analyser.getByteTimeDomainData(n.timeDomainData),b(),y(),v(),n.requestAnimID=requestAnimationFrame(n.render)}}),Object(a["a"])(this,"set",function(t,e){if(e)return n.render(),void(document.getElementById("visual").dataset["visible"]=!0);cancelAnimationFrame(n.requestAnimID),document.getElementById("visual").dataset["visible"]=!1}),Object(a["a"])(this,"connect",function(t){t.hasOwnProperty("input")?n.output.connect(t.input):n.output.connect(t)}),this.context=e,this.analyser=this.context.createAnalyser(),this.analyser.fftSize=512,this.analyser.maxDecibels=0,this.bufferLength=this.analyser.frequencyBinCount,this.frequencyData=new Uint8Array(this.bufferLength),this.timeDomainData=new Uint8Array(this.bufferLength),this.input=this.analyser,this.output=this.analyser,this.init()}),I=["C3","C#3","D3","D#3","E3","F3","F#3","G3","G#3","A3","A#3","B3","C4","C#4","D4","D#4","E4","F4","F#4","G4","G#3","A4","A#4","B4"],L=function t(){var e=this;Object(i["a"])(this,t),Object(a["a"])(this,"init",function(){e.overallGain=e.context.createGain(),e.overallGain.gain.value=.5,e.VCF.connect(e.Delay),e.VCF.connect(e.overallGain),e.Delay.connect(e.overallGain),e.overallGain.connect(e.Visual.input),e.Visual.connect(e.context.destination),document.body.classList.add("loaded")});try{this.context=window.webkitAudioContext?new o["a"]:new AudioContext;var n=function(){"suspended"===e.context.state&&e.context.resume().then(function(){console.log("Playback resumed successfully")})};document.body.addEventListener("mousedown",n),document.body.addEventListener("keydown",n)}catch(s){return void alert("Web Audio API is not supported in this browser")}this.store=new c(x),this.controls=[],q.map(function(t){e.controls.push(new V(t,e.store.changeParam,e.store.subscribe))}),this.VCF=new p(this.context),["freq","qual"].map(function(t){e.store.subscribe("filter__".concat(t),function(){return e.VCF.set(t,e.store.settings["filter__".concat(t)])})}),this.VCOs={},I.map(function(t){var n=new f(e.context,t,e.VCF);Object.keys(n.oscillators).forEach(function(t){["gain","detune","wavetype","offset"].forEach(function(i){e.store.subscribe("".concat(t,"__").concat(i),function(){return n.set(t,i,e.store.settings["".concat(t,"__").concat(i)])})})}),e.VCOs=Object.assign({},e.VCOs,Object(a["a"])({},t,n))}),this.keyboard=new k({id:"keyboard",startNote:"C3"},function(t,n){return e.VCOs[t].play(n)},function(t,n){return e.VCOs[t].stop()}),this.store.subscribe("options",function(){return e.keyboard.set("enabled",e.store.settings.options.keyboard)}),this.LFO=new m(this.context,{VCOs:this.VCOs,VCF:this.VCF}),["amount","freq","wavetype"].map(function(t){e.store.subscribe("lfo__".concat(t),function(){return e.LFO.set(t,e.store.settings["lfo__".concat(t)])})}),this.store.subscribe("modulation",function(){return e.LFO.set("modulation",e.store.settings["modulation"])}),this.VCA=new b(this.context,{VCOs:this.VCOs,VCF:this.VCF}),["attack","decay","sustain","release"].map(function(t){e.store.subscribe("".concat(t),function(){return e.VCA.set(t,e.store.settings["".concat(t)])})}),this.store.subscribe("modulation",function(){return e.VCA.set("modulation",e.store.settings["modulation"])}),this.Delay=new y(this.context),["gain","time","feedback","cutoff"].map(function(t){e.store.subscribe("delay__".concat(t),function(){return e.Delay.set(t,e.store.settings["delay__".concat(t)])})}),this.Wires=new P(this.store.settings.modulation,this.store.changeParam),this.Visual=new F(this.context),this.store.subscribe("options",function(){return e.Visual.set("visible",e.store.settings.options.visualization)}),this.init()},E=new L;console.log(E)}});
//# sourceMappingURL=app.a4d9aec0.js.map