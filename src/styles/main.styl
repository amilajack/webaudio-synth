@import normalize
@import variables


body
	background-color: #222
	color: $color-primary
	font-family: $font-family-default
	overflow hidden
	perspective 1000px
	
	&.on-wires-drawing
		[id$='offset']
		.knob-wrapper
		ul
			opacity .4
			pointer-events none
	
	&.on-visualizing
		#synth
			left 4.5vw
			right unset
		#keyboard
			left 14vw
			right unset


#synth
	position absolute
	top 0
	left 0
	right 0
	bottom 0
	margin auto
	width 1120px
	height 475px
	padding 5px
	display flex
	justify-content flex-start
	background-color: rgba(38, 39, 47, .85)
	box-shadow: 1px 1px 0px $color-primary
	border: 2px solid $color-primary
	border-radius 10px
	opacity 0
	animation: fade-in .4s
	animation-fill-mode forwards
	// box-shadow:
	// 	1px -0px rgb(127,255,255), 1px -1px rgb(192,255,255),
	// 	2px -1px rgb(126,254,254), 2px -2px rgb(191,254,254),
	// 	3px -2px rgb(125,253,253), 3px -3px rgb(190,253,253),
	// 	4px -3px rgb(124,252,252), 4px -4px rgb(189,252,252),
	// 	5px -4px rgb(123,251,251), 5px -5px rgb(188,251,251),
	// 	6px -5px rgb(122,250,250), 6px -6px rgb(187,250,250)
	border-top 10px solid $color-primary
	border-top-left-radius 20px
	border-top-right-radius 20px
	z-index 1

	.module
		position relative
		flex 0 1 20%
		display flex
		flex-direction column
		justify-content center
		align-items center
		margin-right 5px
		border-right: 1px solid $color-primary
		justify-content center
		&:last-of-type
			border none
			margin 0
		
		&.lfo
			.knob-group
				ul
					top unset
					left 0
					right 0
					bottom -30px
					margin auto
					width 80%
					transition opacity .2s
					pointer-events all
					li
						margin 0 5px

		&.vca
			align-items flex-start
			.knob-wrapper
				margin 0 0 0 10px
				&:after
					left unset
					bottom 50%
					left 110%
					margin auto
		&.delay
			justify-content flex-end

		h2
			position absolute
			top 5px
			left 0
			right 0
			margin auto
			text-align center
			text-transform uppercase
			letter-spacing 5px
			text-shadow 2px 2px 0px #111
			user-select none
		.knob-wrapper
			position relative
			margin 15px 0
			text-align center
			transition opacity .2s
			pointer-events all
			z-index 2
			&:after
				content attr(data-label)
				position absolute
				left 0
				right 0
				bottom -5px
				margin auto
				font-size 17px
				text-align center
				text-shadow 1px 1px 0px #111
				letter-spacing 1px
			&>*
				display inline-block !important
			input
				letter-spacing 1px
				text-shadow 1px 2px 0px #111

		.knob-group
			position relative
			display flex
			justify-content center
			
			// osc step offset
			[id$='offset']
				position relative
				display flex
				flex-direction column
				justify-content center
				transition opacity .2s
				z-index 2
				input
					padding 5px 0
					&:focus
						outline none
						box-shadow none
				button
					width 100%
					height 20px
					padding 0
					background-color transparent
					background-image url('/images/arrow.svg')
					background-position center
					background-repeat no-repeat
					background-size cover
					border none
					cursor pointer
					opacity .65
					transition opacity .1s
					&:hover
						opacity 1
					&.step-up
						transform rotate(180deg)

			.knob-wrapper
				flex 1 0 45%
				align-self flex-end
				user-select none

			// wavetype select list
			ul
				position absolute
				top 10px
				right -5px
				width 40%
				height 25px
				display flex
				z-index 2
				li
					flex 1 1 33%
					margin 0 2px
					background-size 100%
					background-position center
					background-repeat no-repeat
					opacity .4
					// border-bottom 1px solid transparent
					transition all .2s
					cursor pointer
					&[data-wavetype='sine']
						background-image: url('/images/sine.svg')
					&[data-wavetype='sawtooth']
						background-image: url('/images/sawtooth.svg')
					&[data-wavetype='square']
						background-image: url('/images/square.svg')

					&:hover
					&.selected
						opacity 1
						// border-bottom 1px solid $color-primary


canvas
	user-select none
	&#wires
	&#visual
		position absolute
		top 0
		left 0
		right 0
		margin auto


input
	cursor pointer
	font-family: $font-family-default
	color: $color-primary
	border none
	background-color transparent
	text-align center
	&[type='number']
		-moz-appearance textfield
		&::-webkit-inner-spin-button
			-webkit-appearance none
			-moz-appearance none
			appearance none

button
input
	border none
	background transparent
	&:focus
		outline none
		box-shadow: 0px 0px 2px $color-contrast
		border-radius 2px


//
#keyboard
	position absolute !important
	top 50%
	left 0
	right 0
	margin auto !important
	// display none
	transform rotateX(45deg) translateY(300px)
	z-index 0
	ul
		li
			border-radius 5px !important
			transition all .1s
			// border: 1px solid $color-accent !important

			// &[data-note-type='white']
			// 	border-right initial !important
			// 	background-color: transparent !important
			// 	&:last-childaa
			// 		border: 1px solid $color-accent !important
			// &[data-note-type='black']
			// 	border: 1px solid $color-accent !important
			// 	background-color: $color-accent !important

			// &:hover
			// 	background-color: $color-contrast !important


#options
	position absolute
	top 20px
	left 20px
	&>*
		display inline-block
		vertical-align middle
	&.visible
		#toggle-options
			transform rotate(90deg)
			opacity 1
		ul
			li
				transform translateY(0%)
				opacity .75
				pointer-events all
				&:nth-child(1)
					transition transform .2s ease 0s, opacity .2s
				&:nth-child(2)
					transition transform .2s ease .1s, opacity .2s
				&:nth-child(3)
					transition transform .2s ease .2s, opacity .2s
				&:nth-child(4)
					transition transform .2s ease .3s, opacity .2s


	#toggle-options
		width 45px
		height 45px
		background-image url('/images/options.svg')
		background-size 100%
		background-position center
		opacity .75
		transition all .2s
		cursor pointer
		&:hover
			opacity 1
	
	ul
		padding-left 10px
		li
			display inline-block
			width 35px
			height 35px
			margin 0 10px
			background-size 100%
			background-position center
			cursor pointer
			opacity 0
			transform translateY(-100%)
			user-select none
			pointer-events none
			&:hover
				opacity 1

			&[data-option='midi']
				background-image url('/images/midi.svg')
			&[data-option='keyboard']
				background-image url('/images/keyboard.svg')
			&[data-option='visualization']
				background-image url('/images/visualization.svg')

			&:nth-child(1)
				transition transform .2s ease .3s, opacity .2s
			&:nth-child(2)
				transition transform .2s ease .2s, opacity .2s
			&:nth-child(3)
				transition transform .2s ease .1s, opacity .2s
			&:nth-child(4)
				transition transform .2s ease 0s, opacity .2s




// animation
@keyframes fade-in
	0%
		opacity 0
	100%
		opacity 1